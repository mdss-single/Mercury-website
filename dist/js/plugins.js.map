{"version":3,"sources":["flickity.js","smoothscroll.js"],"names":["window","factory","define","amd","jQuery","module","exports","require","jQueryBridget","arraySlice","Array","prototype","slice","console","logError","message","error","namespace","PluginClass","$","option","opts","isPlainObject","this","options","extend","fn","arg0","each","i","elem","instance","data","_init","$elems","methodName","args","returnValue","pluginMethodStr","call","arguments","method","charAt","value","apply","undefined","updateJQuery","bridget","global","EvEmitter","proto","on","eventName","listener","events","_events","listeners","indexOf","push","once","onceEvents","_onceEvents","off","length","index","splice","emitEvent","onceListeners","allOff","getSize","getStyleSize","num","parseFloat","isNaN","measurements","measurementsLength","getStyle","style","getComputedStyle","isBoxSizeOuter","isSetup","div","document","createElement","width","padding","borderStyle","borderWidth","boxSizing","body","documentElement","appendChild","Math","round","removeChild","setup","querySelector","nodeType","display","size","height","innerWidth","innerHeight","outerWidth","outerHeight","getZeroSize","offsetWidth","offsetHeight","isBorderBox","measurement","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","selector","fizzyUIUtils","utils","a","b","prop","modulo","makeArray","obj","isArray","removeFrom","ary","getParent","parentNode","getQueryElement","handleEvent","event","type","filterFindElements","elems","ffElems","forEach","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","clearTimeout","_this","setTimeout","docReady","callback","readyState","addEventListener","toDashed","str","replace","match","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","attr","getAttribute","JSON","parse","className","Flickity","Cell","parent","element","create","position","setAttribute","x","shift","destroy","unselect","side","originSide","setPosition","updateTarget","renderPosition","setDefaultTarget","marginProperty","target","cellAlign","getPositionValue","select","classList","add","removeAttribute","remove","wrapShift","slideableWidth","Slide","isOriginLeft","cells","addCell","cell","max","beginMargin","firstMargin","endMargin","lastCell","getLastCell","lastMargin","slideWidth","getCellElements","map","animatePrototype","startAnimation","isAnimating","restingFrames","animate","applyDragForce","applySelectedAttraction","previousX","integratePhysics","positionSlider","settle","requestAnimationFrame","wrapAround","shiftWrapCells","setTranslateX","dispatchScrollEvent","is3d","cursorPosition","rightToLeft","translateX","slider","transform","firstSlide","slides","positionX","progress","slidesWidth","dispatchEvent","positionSliderAtSelected","selectedSlide","velocity","percentPosition","isPointerDown","isFreeScrolling","selectedIndex","beforeGap","_shiftCells","beforeShiftCells","afterGap","afterShiftCells","gap","cellShift","_unshiftCells","getFrictionFactor","applyForce","force","getRestingPosition","isDraggable","dragForce","dragX","selectedAttraction","_Flickity","moveElements","toElem","GUID","instances","queryElement","flickityGUID","$element","constructor","defaults","_create","accessibility","freeScrollFriction","friction","namespaceJQueryEvents","resize","setGallerySize","createMethods","id","guid","viewport","_createSlider","watchCSS","activate","isActive","_filterFindCellElements","children","reloadCells","tabIndex","selectInitialIndex","isInitActivated","cellSelector","_makeCells","positionCells","_getWrapShiftCells","cellElem","getLastSlide","_sizeCells","_positionCells","maxCellHeight","cellX","startCell","len","updateSlides","_containSlides","slide","nextMargin","canCellFit","_getCanCellFit","updateSelectedSlide","groupCells","number","parseInt","percentMatch","percent","reposition","setCellAlign","cellAlignShorthands","center","left","right","shorthand","adaptiveHeight","gapX","cellIndex","_getGapCells","increment","contain","isRightToLeft","contentWidth","isContentSmaller","beginBound","endBound","min","emitArgs","$event","jQEvent","Event","trigger","isWrap","isInstant","_wrapSelect","prevIndex","wrapIndex","delta","abs","backWrapDelta","forewardWrapDelta","isDragSelect","previous","next","unselectSelectedSlide","selectedCells","selectedElements","selectedCell","selectedElement","initialIndex","queryCell","selectCell","getCellSlideIndex","getCell","getCells","getParentCell","getAdjacentCellElements","adjCount","cellElems","slideIndex","uiChange","childUIPointerDown","preventDefault","focus","onresize","content","deactivate","onkeydown","isNotFocused","activeElement","handler","keyboardHandlers","keyCode","37","leftMethod","39","rightMethod","prevScrollY","pageYOffset","preventScroll","scrollTo","pageXOffset","removeEventListener","removeData","setJQuery","jq","Unipointer","Object","bindStartEvent","_bindStartEvent","unbindStartEvent","isAdd","bindMethod","startEvent","PointerEvent","getTouch","touches","touch","identifier","pointerIdentifier","onmousedown","button","_pointerDown","ontouchstart","changedTouches","onpointerdown","pointer","pointerId","pointerDown","_bindPostStartEvents","postStartEvents","mousedown","touchstart","pointerdown","_boundPointerEvents","_unbindPostStartEvents","onmousemove","_pointerMove","onpointermove","ontouchmove","pointerMove","onmouseup","_pointerUp","onpointerup","ontouchend","_pointerDone","pointerUp","_pointerReset","pointerDone","onpointercancel","_pointerCancel","ontouchcancel","pointerCancel","getPointerPoint","pageX","y","pageY","Unidragger","bindHandles","_bindHandles","unbindHandles","touchAction","_touchActionValue","handles","handle","okayPointerDown","pointerDownPointer","pointerDownBlur","cursorNodes","TEXTAREA","INPUT","SELECT","OPTION","clickTypes","radio","checkbox","submit","image","file","isCursorNode","nodeName","isClickType","isOkay","focused","blur","moveVector","_dragPointerMove","_dragMove","isDragging","hasDragStarted","_dragStart","_dragPointerUp","_dragEnd","_staticClick","isPreventingClicks","dragStart","dragMove","bind","dragEnd","onclick","isIgnoringMouseUp","staticClick","draggable","dragThreshold","isTouch","isTouchmoveScrollCanceled","_createDrag","onActivateDrag","_uiChangeDrag","onDeactivateDrag","updateDraggable","bindDrag","unbindDrag","_pointerDownPreventDefault","pointerDownFocus","pointerDownScroll","getScrollPosition","_pointerDownDefault","focusNodes","isTouchStart","isTouchPointer","pointerType","isFocusNode","isTouchScrolling","dragStartPosition","previousDragX","direction","originBound","dragMoveTime","Date","freeScroll","dragEndRestingSelect","restingX","dragEndBoostSelect","distance","getSlideDistance","positiveResting","_getClosestResting","negativeResting","minDistance","Infinity","condition","d","md","isWrapAround","wrap","floor","clickedCell","onscroll","scroll","scrollMoveX","scrollMoveY","svgURI","PrevNextButton","isEnabled","isPrevious","leftDirection","isLeft","disable","svg","createSVG","update","createElementNS","shape","path","pathMovements","arrowShape","x0","x1","y1","x2","y2","x3","enable","disabled","lastIndex","boundIndex","prevNextButtons","_createPrevNextButtons","prevButton","nextButton","activatePrevNextButtons","deactivatePrevNextButtons","PageDots","holder","dots","handleClick","onClick","setDots","addDots","removeDots","count","fragment","createDocumentFragment","newDots","dot","updateSelected","selectedDot","onTap","pageDots","_createPageDots","activatePageDots","updateSelectedPageDots","updatePageDots","deactivatePageDots","Player","state","onVisibilityChange","visibilityChange","onVisibilityPlay","visibilityPlay","play","hidden","tick","time","autoPlay","clear","stop","pause","unpause","pauseAutoPlayOnHover","_createPlayer","player","activatePlayer","stopPlayer","deactivatePlayer","playPlayer","pausePlayer","unpausePlayer","onmouseenter","onmouseleave","insert","isAppend","insertCellElement","insertBefore","endCells","cellChange","append","prepend","minCellIndex","cellSizeChange","changedCellIndex","isPositioningSlider","prevSelectedElem","LazyLoader","img","flickity","load","_createLazyload","lazyLoad","lazyImages","lazyCellImages","lazyloadAttr","srcAttr","srcsetAttr","imgs","getCellLazyImages","src","srcset","onload","complete","onerror","_createAsNavFor","activateAsNavFor","deactivateAsNavFor","destroyAsNavFor","asNavForOption","asNavFor","setNavCompanion","companion","navCompanion","onNavCompanionSelect","navCompanionSelect","onNavStaticClick","t","firstIndex","selectIndex","removeNavSelectedElements","navSelectedElements","changeNavSelectedClass","navElem","cellElement","imagesLoaded","ImagesLoaded","onAlways","queryElem","elements","getImages","jqDeferred","Deferred","check","images","addElementImages","addImage","background","addElementBackgroundImages","elementNodeTypes","childImgs","child","1","9","11","LoadingImage","Background","url","Image","reURL","exec","backgroundImage","addBackground","loadingImage","onProgress","progressedCount","hasAnyBroken","isLoaded","notify","debug","log","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","unbindEvents","makeJQueryPlugin","promise","_createImagesLoaded","polyfill","w","__forceSmoothScrollPolyfill__","userAgent","SCROLL_TIME","original","scrollBy","elementScroll","scrollElement","scrollIntoView","now","performance","ROUNDING_TOLERANCE","navigator","RegExp","join","test","shouldBailOut","smoothScroll","scrollX","top","scrollY","scrollLeft","scrollTop","SyntaxError","behavior","scrollableParent","el","isScrollableY","hasScrollableSpace","canOverflow","isScrollableX","findScrollableParent","parentRects","getBoundingClientRect","clientRects","firstArg","TypeError","axis","clientHeight","scrollHeight","clientWidth","scrollWidth","overflowValue","step","context","currentX","currentY","k","elapsed","startTime","cos","PI","startX","startY","scrollable"],"mappings":"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","file":"plugins.js","sourcesContent":["/*!\r\n * Flickity PACKAGED v2.2.0\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * https://flickity.metafizzy.co\r\n * Copyright 2015-2018 Metafizzy\r\n */\r\n\r\n/**\r\n * Bridget makes jQuery widgets\r\n * v2.0.1\r\n * MIT license\r\n */\r\n\r\n/* jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\r\n      return factory( window, jQuery );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('jquery')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.jQueryBridget = factory(\r\n      window,\r\n      window.jQuery\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, jQuery ) {\r\n'use strict';\r\n\r\n// ----- utils ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// helper function for logging errors\r\n// $.error breaks jQuery chaining\r\nvar console = window.console;\r\nvar logError = typeof console == 'undefined' ? function() {} :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// ----- jQueryBridget ----- //\r\n\r\nfunction jQueryBridget( namespace, PluginClass, $ ) {\r\n  $ = $ || jQuery || window.jQuery;\r\n  if ( !$ ) {\r\n    return;\r\n  }\r\n\r\n  // add option method -> $().plugin('option', {...})\r\n  if ( !PluginClass.prototype.option ) {\r\n    // option setter\r\n    PluginClass.prototype.option = function( opts ) {\r\n      // bail out if not an object\r\n      if ( !$.isPlainObject( opts ) ){\r\n        return;\r\n      }\r\n      this.options = $.extend( true, this.options, opts );\r\n    };\r\n  }\r\n\r\n  // make jQuery plugin\r\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\r\n    if ( typeof arg0 == 'string' ) {\r\n      // method call $().plugin( 'methodName', { options } )\r\n      // shift arguments by 1\r\n      var args = arraySlice.call( arguments, 1 );\r\n      return methodCall( this, arg0, args );\r\n    }\r\n    // just $().plugin({ options })\r\n    plainCall( this, arg0 );\r\n    return this;\r\n  };\r\n\r\n  // $().plugin('methodName')\r\n  function methodCall( $elems, methodName, args ) {\r\n    var returnValue;\r\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\r\n\r\n    $elems.each( function( i, elem ) {\r\n      // get instance\r\n      var instance = $.data( elem, namespace );\r\n      if ( !instance ) {\r\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\r\n          pluginMethodStr );\r\n        return;\r\n      }\r\n\r\n      var method = instance[ methodName ];\r\n      if ( !method || methodName.charAt(0) == '_' ) {\r\n        logError( pluginMethodStr + ' is not a valid method' );\r\n        return;\r\n      }\r\n\r\n      // apply method, get return value\r\n      var value = method.apply( instance, args );\r\n      // set return value if value is returned, use only first value\r\n      returnValue = returnValue === undefined ? value : returnValue;\r\n    });\r\n\r\n    return returnValue !== undefined ? returnValue : $elems;\r\n  }\r\n\r\n  function plainCall( $elems, options ) {\r\n    $elems.each( function( i, elem ) {\r\n      var instance = $.data( elem, namespace );\r\n      if ( instance ) {\r\n        // set options & init\r\n        instance.option( options );\r\n        instance._init();\r\n      } else {\r\n        // initialize new instance\r\n        instance = new PluginClass( elem, options );\r\n        $.data( elem, namespace, instance );\r\n      }\r\n    });\r\n  }\r\n\r\n  updateJQuery( $ );\r\n\r\n}\r\n\r\n// ----- updateJQuery ----- //\r\n\r\n// set $.bridget for v1 backwards compatibility\r\nfunction updateJQuery( $ ) {\r\n  if ( !$ || ( $ && $.bridget ) ) {\r\n    return;\r\n  }\r\n  $.bridget = jQueryBridget;\r\n}\r\n\r\nupdateJQuery( jQuery || window.jQuery );\r\n\r\n// -----  ----- //\r\n\r\nreturn jQueryBridget;\r\n\r\n}));\r\n\r\n/**\r\n * EvEmitter v1.1.0\r\n * Lil' event emitter\r\n * MIT License\r\n */\r\n\r\n/* jshint unused: true, undef: true, strict: true */\r\n\r\n( function( global, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, window */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'ev-emitter/ev-emitter',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.EvEmitter = factory();\r\n  }\r\n\r\n}( typeof window != 'undefined' ? window : this, function() {\r\n\r\n\r\n\r\nfunction EvEmitter() {}\r\n\r\nvar proto = EvEmitter.prototype;\r\n\r\nproto.on = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // set events hash\r\n  var events = this._events = this._events || {};\r\n  // set listeners array\r\n  var listeners = events[ eventName ] = events[ eventName ] || [];\r\n  // only add once\r\n  if ( listeners.indexOf( listener ) == -1 ) {\r\n    listeners.push( listener );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.once = function( eventName, listener ) {\r\n  if ( !eventName || !listener ) {\r\n    return;\r\n  }\r\n  // add event\r\n  this.on( eventName, listener );\r\n  // set once flag\r\n  // set onceEvents hash\r\n  var onceEvents = this._onceEvents = this._onceEvents || {};\r\n  // set onceListeners object\r\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\r\n  // set flag\r\n  onceListeners[ listener ] = true;\r\n\r\n  return this;\r\n};\r\n\r\nproto.off = function( eventName, listener ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  var index = listeners.indexOf( listener );\r\n  if ( index != -1 ) {\r\n    listeners.splice( index, 1 );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.emitEvent = function( eventName, args ) {\r\n  var listeners = this._events && this._events[ eventName ];\r\n  if ( !listeners || !listeners.length ) {\r\n    return;\r\n  }\r\n  // copy over to avoid interference if .off() in listener\r\n  listeners = listeners.slice(0);\r\n  args = args || [];\r\n  // once stuff\r\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\r\n\r\n  for ( var i=0; i < listeners.length; i++ ) {\r\n    var listener = listeners[i]\r\n    var isOnce = onceListeners && onceListeners[ listener ];\r\n    if ( isOnce ) {\r\n      // remove listener\r\n      // remove before trigger to prevent recursion\r\n      this.off( eventName, listener );\r\n      // unset once flag\r\n      delete onceListeners[ listener ];\r\n    }\r\n    // trigger listener\r\n    listener.apply( this, args );\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nproto.allOff = function() {\r\n  delete this._events;\r\n  delete this._onceEvents;\r\n};\r\n\r\nreturn EvEmitter;\r\n\r\n}));\r\n\r\n/*!\r\n * getSize v2.0.3\r\n * measure size of elements\r\n * MIT license\r\n */\r\n\r\n/* jshint browser: true, strict: true, undef: true, unused: true */\r\n/* globals console: false */\r\n\r\n( function( window, factory ) {\r\n  /* jshint strict: false */ /* globals define, module */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'get-size/get-size',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.getSize = factory();\r\n  }\r\n\r\n})( window, function factory() {\r\n'use strict';\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// get a number from a string, not a percentage\r\nfunction getStyleSize( value ) {\r\n  var num = parseFloat( value );\r\n  // not a percent like '100%', and a number\r\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\r\n  return isValid && num;\r\n}\r\n\r\nfunction noop() {}\r\n\r\nvar logError = typeof console == 'undefined' ? noop :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n// -------------------------- measurements -------------------------- //\r\n\r\nvar measurements = [\r\n  'paddingLeft',\r\n  'paddingRight',\r\n  'paddingTop',\r\n  'paddingBottom',\r\n  'marginLeft',\r\n  'marginRight',\r\n  'marginTop',\r\n  'marginBottom',\r\n  'borderLeftWidth',\r\n  'borderRightWidth',\r\n  'borderTopWidth',\r\n  'borderBottomWidth'\r\n];\r\n\r\nvar measurementsLength = measurements.length;\r\n\r\nfunction getZeroSize() {\r\n  var size = {\r\n    width: 0,\r\n    height: 0,\r\n    innerWidth: 0,\r\n    innerHeight: 0,\r\n    outerWidth: 0,\r\n    outerHeight: 0\r\n  };\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    size[ measurement ] = 0;\r\n  }\r\n  return size;\r\n}\r\n\r\n// -------------------------- getStyle -------------------------- //\r\n\r\n/**\r\n * getStyle, get style of element, check for Firefox bug\r\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\r\n */\r\nfunction getStyle( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    logError( 'Style returned ' + style +\r\n      '. Are you running this code in a hidden iframe on Firefox? ' +\r\n      'See https://bit.ly/getsizebug1' );\r\n  }\r\n  return style;\r\n}\r\n\r\n// -------------------------- setup -------------------------- //\r\n\r\nvar isSetup = false;\r\n\r\nvar isBoxSizeOuter;\r\n\r\n/**\r\n * setup\r\n * check isBoxSizerOuter\r\n * do on first getSize() rather than on page load for Firefox bug\r\n */\r\nfunction setup() {\r\n  // setup once\r\n  if ( isSetup ) {\r\n    return;\r\n  }\r\n  isSetup = true;\r\n\r\n  // -------------------------- box sizing -------------------------- //\r\n\r\n  /**\r\n   * Chrome & Safari measure the outer-width on style.width on border-box elems\r\n   * IE11 & Firefox<29 measures the inner-width\r\n   */\r\n  var div = document.createElement('div');\r\n  div.style.width = '200px';\r\n  div.style.padding = '1px 2px 3px 4px';\r\n  div.style.borderStyle = 'solid';\r\n  div.style.borderWidth = '1px 2px 3px 4px';\r\n  div.style.boxSizing = 'border-box';\r\n\r\n  var body = document.body || document.documentElement;\r\n  body.appendChild( div );\r\n  var style = getStyle( div );\r\n  // round value for browser zoom. desandro/masonry#928\r\n  isBoxSizeOuter = Math.round( getStyleSize( style.width ) ) == 200;\r\n  getSize.isBoxSizeOuter = isBoxSizeOuter;\r\n\r\n  body.removeChild( div );\r\n}\r\n\r\n// -------------------------- getSize -------------------------- //\r\n\r\nfunction getSize( elem ) {\r\n  setup();\r\n\r\n  // use querySeletor if elem is string\r\n  if ( typeof elem == 'string' ) {\r\n    elem = document.querySelector( elem );\r\n  }\r\n\r\n  // do not proceed on non-objects\r\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\r\n    return;\r\n  }\r\n\r\n  var style = getStyle( elem );\r\n\r\n  // if hidden, everything is 0\r\n  if ( style.display == 'none' ) {\r\n    return getZeroSize();\r\n  }\r\n\r\n  var size = {};\r\n  size.width = elem.offsetWidth;\r\n  size.height = elem.offsetHeight;\r\n\r\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\r\n\r\n  // get all measurements\r\n  for ( var i=0; i < measurementsLength; i++ ) {\r\n    var measurement = measurements[i];\r\n    var value = style[ measurement ];\r\n    var num = parseFloat( value );\r\n    // any 'auto', 'medium' value will be 0\r\n    size[ measurement ] = !isNaN( num ) ? num : 0;\r\n  }\r\n\r\n  var paddingWidth = size.paddingLeft + size.paddingRight;\r\n  var paddingHeight = size.paddingTop + size.paddingBottom;\r\n  var marginWidth = size.marginLeft + size.marginRight;\r\n  var marginHeight = size.marginTop + size.marginBottom;\r\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\r\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\r\n\r\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\r\n\r\n  // overwrite width and height if we can get it from style\r\n  var styleWidth = getStyleSize( style.width );\r\n  if ( styleWidth !== false ) {\r\n    size.width = styleWidth +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\r\n  }\r\n\r\n  var styleHeight = getStyleSize( style.height );\r\n  if ( styleHeight !== false ) {\r\n    size.height = styleHeight +\r\n      // add padding and border unless it's already including it\r\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\r\n  }\r\n\r\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\r\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\r\n\r\n  size.outerWidth = size.width + marginWidth;\r\n  size.outerHeight = size.height + marginHeight;\r\n\r\n  return size;\r\n}\r\n\r\nreturn getSize;\r\n\r\n});\r\n\r\n/**\r\n * matchesSelector v2.0.2\r\n * matchesSelector( element, '.selector' )\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  /*global define: false, module: false */\r\n  'use strict';\r\n  // universal module definition\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'desandro-matches-selector/matches-selector',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.matchesSelector = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n  'use strict';\r\n\r\n  var matchesMethod = ( function() {\r\n    var ElemProto = window.Element.prototype;\r\n    // check for the standard method name first\r\n    if ( ElemProto.matches ) {\r\n      return 'matches';\r\n    }\r\n    // check un-prefixed\r\n    if ( ElemProto.matchesSelector ) {\r\n      return 'matchesSelector';\r\n    }\r\n    // check vendor prefixes\r\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\r\n\r\n    for ( var i=0; i < prefixes.length; i++ ) {\r\n      var prefix = prefixes[i];\r\n      var method = prefix + 'MatchesSelector';\r\n      if ( ElemProto[ method ] ) {\r\n        return method;\r\n      }\r\n    }\r\n  })();\r\n\r\n  return function matchesSelector( elem, selector ) {\r\n    return elem[ matchesMethod ]( selector );\r\n  };\r\n\r\n}));\r\n\r\n/**\r\n * Fizzy UI utils v2.0.7\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'fizzy-ui-utils/utils',[\r\n      'desandro-matches-selector/matches-selector'\r\n    ], function( matchesSelector ) {\r\n      return factory( window, matchesSelector );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('desandro-matches-selector')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.fizzyUIUtils = factory(\r\n      window,\r\n      window.matchesSelector\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, matchesSelector ) {\r\n\r\n\r\n\r\nvar utils = {};\r\n\r\n// ----- extend ----- //\r\n\r\n// extends objects\r\nutils.extend = function( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n};\r\n\r\n// ----- modulo ----- //\r\n\r\nutils.modulo = function( num, div ) {\r\n  return ( ( num % div ) + div ) % div;\r\n};\r\n\r\n// ----- makeArray ----- //\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// turn element or nodeList into an array\r\nutils.makeArray = function( obj ) {\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    return obj;\r\n  }\r\n  // return empty array if undefined or null. #6\r\n  if ( obj === null || obj === undefined ) {\r\n    return [];\r\n  }\r\n\r\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\r\n  if ( isArrayLike ) {\r\n    // convert nodeList to array\r\n    return arraySlice.call( obj );\r\n  }\r\n\r\n  // array of single index\r\n  return [ obj ];\r\n};\r\n\r\n// ----- removeFrom ----- //\r\n\r\nutils.removeFrom = function( ary, obj ) {\r\n  var index = ary.indexOf( obj );\r\n  if ( index != -1 ) {\r\n    ary.splice( index, 1 );\r\n  }\r\n};\r\n\r\n// ----- getParent ----- //\r\n\r\nutils.getParent = function( elem, selector ) {\r\n  while ( elem.parentNode && elem != document.body ) {\r\n    elem = elem.parentNode;\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      return elem;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- getQueryElement ----- //\r\n\r\n// use element as selector string\r\nutils.getQueryElement = function( elem ) {\r\n  if ( typeof elem == 'string' ) {\r\n    return document.querySelector( elem );\r\n  }\r\n  return elem;\r\n};\r\n\r\n// ----- handleEvent ----- //\r\n\r\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\r\nutils.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// ----- filterFindElements ----- //\r\n\r\nutils.filterFindElements = function( elems, selector ) {\r\n  // make array of elems\r\n  elems = utils.makeArray( elems );\r\n  var ffElems = [];\r\n\r\n  elems.forEach( function( elem ) {\r\n    // check that elem is an actual element\r\n    if ( !( elem instanceof HTMLElement ) ) {\r\n      return;\r\n    }\r\n    // add elem if no selector\r\n    if ( !selector ) {\r\n      ffElems.push( elem );\r\n      return;\r\n    }\r\n    // filter & find items if we have a selector\r\n    // filter\r\n    if ( matchesSelector( elem, selector ) ) {\r\n      ffElems.push( elem );\r\n    }\r\n    // find children\r\n    var childElems = elem.querySelectorAll( selector );\r\n    // concat childElems to filterFound array\r\n    for ( var i=0; i < childElems.length; i++ ) {\r\n      ffElems.push( childElems[i] );\r\n    }\r\n  });\r\n\r\n  return ffElems;\r\n};\r\n\r\n// ----- debounceMethod ----- //\r\n\r\nutils.debounceMethod = function( _class, methodName, threshold ) {\r\n  threshold = threshold || 100;\r\n  // original method\r\n  var method = _class.prototype[ methodName ];\r\n  var timeoutName = methodName + 'Timeout';\r\n\r\n  _class.prototype[ methodName ] = function() {\r\n    var timeout = this[ timeoutName ];\r\n    clearTimeout( timeout );\r\n\r\n    var args = arguments;\r\n    var _this = this;\r\n    this[ timeoutName ] = setTimeout( function() {\r\n      method.apply( _this, args );\r\n      delete _this[ timeoutName ];\r\n    }, threshold );\r\n  };\r\n};\r\n\r\n// ----- docReady ----- //\r\n\r\nutils.docReady = function( callback ) {\r\n  var readyState = document.readyState;\r\n  if ( readyState == 'complete' || readyState == 'interactive' ) {\r\n    // do async to allow for other scripts to run. metafizzy/flickity#441\r\n    setTimeout( callback );\r\n  } else {\r\n    document.addEventListener( 'DOMContentLoaded', callback );\r\n  }\r\n};\r\n\r\n// ----- htmlInit ----- //\r\n\r\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\r\nutils.toDashed = function( str ) {\r\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\r\n    return $1 + '-' + $2;\r\n  }).toLowerCase();\r\n};\r\n\r\nvar console = window.console;\r\n/**\r\n * allow user to initialize classes via [data-namespace] or .js-namespace class\r\n * htmlInit( Widget, 'widgetName' )\r\n * options are parsed from data-namespace-options\r\n */\r\nutils.htmlInit = function( WidgetClass, namespace ) {\r\n  utils.docReady( function() {\r\n    var dashedNamespace = utils.toDashed( namespace );\r\n    var dataAttr = 'data-' + dashedNamespace;\r\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\r\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\r\n    var elems = utils.makeArray( dataAttrElems )\r\n      .concat( utils.makeArray( jsDashElems ) );\r\n    var dataOptionsAttr = dataAttr + '-options';\r\n    var jQuery = window.jQuery;\r\n\r\n    elems.forEach( function( elem ) {\r\n      var attr = elem.getAttribute( dataAttr ) ||\r\n        elem.getAttribute( dataOptionsAttr );\r\n      var options;\r\n      try {\r\n        options = attr && JSON.parse( attr );\r\n      } catch ( error ) {\r\n        // log error, do not initialize\r\n        if ( console ) {\r\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\r\n          ': ' + error );\r\n        }\r\n        return;\r\n      }\r\n      // initialize\r\n      var instance = new WidgetClass( elem, options );\r\n      // make available via $().data('namespace')\r\n      if ( jQuery ) {\r\n        jQuery.data( elem, namespace, instance );\r\n      }\r\n    });\r\n\r\n  });\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn utils;\r\n\r\n}));\r\n\r\n// Flickity.Cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/cell',[\r\n      'get-size/get-size'\r\n    ], function( getSize ) {\r\n      return factory( window, getSize );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('get-size')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Cell = factory(\r\n      window,\r\n      window.getSize\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, getSize ) {\r\n\r\n\r\n\r\nfunction Cell( elem, parent ) {\r\n  this.element = elem;\r\n  this.parent = parent;\r\n\r\n  this.create();\r\n}\r\n\r\nvar proto = Cell.prototype;\r\n\r\nproto.create = function() {\r\n  this.element.style.position = 'absolute';\r\n  this.element.setAttribute( 'aria-hidden', 'true' );\r\n  this.x = 0;\r\n  this.shift = 0;\r\n};\r\n\r\nproto.destroy = function() {\r\n  // reset style\r\n  this.unselect();\r\n  this.element.style.position = '';\r\n  var side = this.parent.originSide;\r\n  this.element.style[ side ] = '';\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n};\r\n\r\nproto.setPosition = function( x ) {\r\n  this.x = x;\r\n  this.updateTarget();\r\n  this.renderPosition( x );\r\n};\r\n\r\n// setDefaultTarget v1 method, backwards compatibility, remove in v3\r\nproto.updateTarget = proto.setDefaultTarget = function() {\r\n  var marginProperty = this.parent.originSide == 'left' ? 'marginLeft' : 'marginRight';\r\n  this.target = this.x + this.size[ marginProperty ] +\r\n    this.size.width * this.parent.cellAlign;\r\n};\r\n\r\nproto.renderPosition = function( x ) {\r\n  // render position of cell with in slider\r\n  var side = this.parent.originSide;\r\n  this.element.style[ side ] = this.parent.getPositionValue( x );\r\n};\r\n\r\nproto.select = function() {\r\n  this.element.classList.add('is-selected');\r\n  this.element.removeAttribute('aria-hidden');\r\n};\r\n\r\nproto.unselect = function() {\r\n  this.element.classList.remove('is-selected');\r\n  this.element.setAttribute( 'aria-hidden', 'true' );\r\n};\r\n\r\n/**\r\n * @param {Integer} factor - 0, 1, or -1\r\n**/\r\nproto.wrapShift = function( shift ) {\r\n  this.shift = shift;\r\n  this.renderPosition( this.x + this.parent.slideableWidth * shift );\r\n};\r\n\r\nproto.remove = function() {\r\n  this.element.parentNode.removeChild( this.element );\r\n};\r\n\r\nreturn Cell;\r\n\r\n}));\r\n\r\n// slide\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/slide',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.Slide = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n'use strict';\r\n\r\nfunction Slide( parent ) {\r\n  this.parent = parent;\r\n  this.isOriginLeft = parent.originSide == 'left';\r\n  this.cells = [];\r\n  this.outerWidth = 0;\r\n  this.height = 0;\r\n}\r\n\r\nvar proto = Slide.prototype;\r\n\r\nproto.addCell = function( cell ) {\r\n  this.cells.push( cell );\r\n  this.outerWidth += cell.size.outerWidth;\r\n  this.height = Math.max( cell.size.outerHeight, this.height );\r\n  // first cell stuff\r\n  if ( this.cells.length == 1 ) {\r\n    this.x = cell.x; // x comes from first cell\r\n    var beginMargin = this.isOriginLeft ? 'marginLeft' : 'marginRight';\r\n    this.firstMargin = cell.size[ beginMargin ];\r\n  }\r\n};\r\n\r\nproto.updateTarget = function() {\r\n  var endMargin = this.isOriginLeft ? 'marginRight' : 'marginLeft';\r\n  var lastCell = this.getLastCell();\r\n  var lastMargin = lastCell ? lastCell.size[ endMargin ] : 0;\r\n  var slideWidth = this.outerWidth - ( this.firstMargin + lastMargin );\r\n  this.target = this.x + this.firstMargin + slideWidth * this.parent.cellAlign;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.select = function() {\r\n  this.cells.forEach( function( cell ) {\r\n    cell.select();\r\n  });\r\n};\r\n\r\nproto.unselect = function() {\r\n  this.cells.forEach( function( cell ) {\r\n    cell.unselect();\r\n  });\r\n};\r\n\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\nreturn Slide;\r\n\r\n}));\r\n\r\n// animate\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/animate',[\r\n      'fizzy-ui-utils/utils'\r\n    ], function( utils ) {\r\n      return factory( window, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = window.Flickity || {};\r\n    window.Flickity.animatePrototype = factory(\r\n      window,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, utils ) {\r\n\r\n\r\n\r\n// -------------------------- animate -------------------------- //\r\n\r\nvar proto = {};\r\n\r\nproto.startAnimation = function() {\r\n  if ( this.isAnimating ) {\r\n    return;\r\n  }\r\n\r\n  this.isAnimating = true;\r\n  this.restingFrames = 0;\r\n  this.animate();\r\n};\r\n\r\nproto.animate = function() {\r\n  this.applyDragForce();\r\n  this.applySelectedAttraction();\r\n\r\n  var previousX = this.x;\r\n\r\n  this.integratePhysics();\r\n  this.positionSlider();\r\n  this.settle( previousX );\r\n  // animate next frame\r\n  if ( this.isAnimating ) {\r\n    var _this = this;\r\n    requestAnimationFrame( function animateFrame() {\r\n      _this.animate();\r\n    });\r\n  }\r\n};\r\n\r\nproto.positionSlider = function() {\r\n  var x = this.x;\r\n  // wrap position around\r\n  if ( this.options.wrapAround && this.cells.length > 1 ) {\r\n    x = utils.modulo( x, this.slideableWidth );\r\n    x = x - this.slideableWidth;\r\n    this.shiftWrapCells( x );\r\n  }\r\n\r\n  this.setTranslateX( x, this.isAnimating );\r\n  this.dispatchScrollEvent();\r\n};\r\n\r\nproto.setTranslateX = function( x, is3d ) {\r\n  x += this.cursorPosition;\r\n  // reverse if right-to-left and using transform\r\n  x = this.options.rightToLeft ? -x : x;\r\n  var translateX = this.getPositionValue( x );\r\n  // use 3D tranforms for hardware acceleration on iOS\r\n  // but use 2D when settled, for better font-rendering\r\n  this.slider.style.transform = is3d ?\r\n    'translate3d(' + translateX + ',0,0)' : 'translateX(' + translateX + ')';\r\n};\r\n\r\nproto.dispatchScrollEvent = function() {\r\n  var firstSlide = this.slides[0];\r\n  if ( !firstSlide ) {\r\n    return;\r\n  }\r\n  var positionX = -this.x - firstSlide.target;\r\n  var progress = positionX / this.slidesWidth;\r\n  this.dispatchEvent( 'scroll', null, [ progress, positionX ] );\r\n};\r\n\r\nproto.positionSliderAtSelected = function() {\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n  this.x = -this.selectedSlide.target;\r\n  this.velocity = 0; // stop wobble\r\n  this.positionSlider();\r\n};\r\n\r\nproto.getPositionValue = function( position ) {\r\n  if ( this.options.percentPosition ) {\r\n    // percent position, round to 2 digits, like 12.34%\r\n    return ( Math.round( ( position / this.size.innerWidth ) * 10000 ) * 0.01 )+ '%';\r\n  } else {\r\n    // pixel positioning\r\n    return Math.round( position ) + 'px';\r\n  }\r\n};\r\n\r\nproto.settle = function( previousX ) {\r\n  // keep track of frames where x hasn't moved\r\n  if ( !this.isPointerDown && Math.round( this.x * 100 ) == Math.round( previousX * 100 ) ) {\r\n    this.restingFrames++;\r\n  }\r\n  // stop animating if resting for 3 or more frames\r\n  if ( this.restingFrames > 2 ) {\r\n    this.isAnimating = false;\r\n    delete this.isFreeScrolling;\r\n    // render position with translateX when settled\r\n    this.positionSlider();\r\n    this.dispatchEvent( 'settle', null, [ this.selectedIndex ] );\r\n  }\r\n};\r\n\r\nproto.shiftWrapCells = function( x ) {\r\n  // shift before cells\r\n  var beforeGap = this.cursorPosition + x;\r\n  this._shiftCells( this.beforeShiftCells, beforeGap, -1 );\r\n  // shift after cells\r\n  var afterGap = this.size.innerWidth - ( x + this.slideableWidth + this.cursorPosition );\r\n  this._shiftCells( this.afterShiftCells, afterGap, 1 );\r\n};\r\n\r\nproto._shiftCells = function( cells, gap, shift ) {\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    var cell = cells[i];\r\n    var cellShift = gap > 0 ? shift : 0;\r\n    cell.wrapShift( cellShift );\r\n    gap -= cell.size.outerWidth;\r\n  }\r\n};\r\n\r\nproto._unshiftCells = function( cells ) {\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  for ( var i=0; i < cells.length; i++ ) {\r\n    cells[i].wrapShift( 0 );\r\n  }\r\n};\r\n\r\n// -------------------------- physics -------------------------- //\r\n\r\nproto.integratePhysics = function() {\r\n  this.x += this.velocity;\r\n  this.velocity *= this.getFrictionFactor();\r\n};\r\n\r\nproto.applyForce = function( force ) {\r\n  this.velocity += force;\r\n};\r\n\r\nproto.getFrictionFactor = function() {\r\n  return 1 - this.options[ this.isFreeScrolling ? 'freeScrollFriction' : 'friction' ];\r\n};\r\n\r\nproto.getRestingPosition = function() {\r\n  // my thanks to Steven Wittens, who simplified this math greatly\r\n  return this.x + this.velocity / ( 1 - this.getFrictionFactor() );\r\n};\r\n\r\nproto.applyDragForce = function() {\r\n  if ( !this.isDraggable || !this.isPointerDown ) {\r\n    return;\r\n  }\r\n  // change the position to drag position by applying force\r\n  var dragVelocity = this.dragX - this.x;\r\n  var dragForce = dragVelocity - this.velocity;\r\n  this.applyForce( dragForce );\r\n};\r\n\r\nproto.applySelectedAttraction = function() {\r\n  // do not attract if pointer down or no slides\r\n  var dragDown = this.isDraggable && this.isPointerDown;\r\n  if ( dragDown || this.isFreeScrolling || !this.slides.length ) {\r\n    return;\r\n  }\r\n  var distance = this.selectedSlide.target * -1 - this.x;\r\n  var force = distance * this.options.selectedAttraction;\r\n  this.applyForce( force );\r\n};\r\n\r\nreturn proto;\r\n\r\n}));\r\n\r\n// Flickity main\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/flickity',[\r\n      'ev-emitter/ev-emitter',\r\n      'get-size/get-size',\r\n      'fizzy-ui-utils/utils',\r\n      './cell',\r\n      './slide',\r\n      './animate'\r\n    ], function( EvEmitter, getSize, utils, Cell, Slide, animatePrototype ) {\r\n      return factory( window, EvEmitter, getSize, utils, Cell, Slide, animatePrototype );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter'),\r\n      require('get-size'),\r\n      require('fizzy-ui-utils'),\r\n      require('./cell'),\r\n      require('./slide'),\r\n      require('./animate')\r\n    );\r\n  } else {\r\n    // browser global\r\n    var _Flickity = window.Flickity;\r\n\r\n    window.Flickity = factory(\r\n      window,\r\n      window.EvEmitter,\r\n      window.getSize,\r\n      window.fizzyUIUtils,\r\n      _Flickity.Cell,\r\n      _Flickity.Slide,\r\n      _Flickity.animatePrototype\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter, getSize,\r\n  utils, Cell, Slide, animatePrototype ) {\r\n\r\n\r\n\r\n// vars\r\nvar jQuery = window.jQuery;\r\nvar getComputedStyle = window.getComputedStyle;\r\nvar console = window.console;\r\n\r\nfunction moveElements( elems, toElem ) {\r\n  elems = utils.makeArray( elems );\r\n  while ( elems.length ) {\r\n    toElem.appendChild( elems.shift() );\r\n  }\r\n}\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\n// globally unique identifiers\r\nvar GUID = 0;\r\n// internal store of all Flickity intances\r\nvar instances = {};\r\n\r\nfunction Flickity( element, options ) {\r\n  var queryElement = utils.getQueryElement( element );\r\n  if ( !queryElement ) {\r\n    if ( console ) {\r\n      console.error( 'Bad element for Flickity: ' + ( queryElement || element ) );\r\n    }\r\n    return;\r\n  }\r\n  this.element = queryElement;\r\n  // do not initialize twice on same element\r\n  if ( this.element.flickityGUID ) {\r\n    var instance = instances[ this.element.flickityGUID ];\r\n    instance.option( options );\r\n    return instance;\r\n  }\r\n\r\n  // add jQuery\r\n  if ( jQuery ) {\r\n    this.$element = jQuery( this.element );\r\n  }\r\n  // options\r\n  this.options = utils.extend( {}, this.constructor.defaults );\r\n  this.option( options );\r\n\r\n  // kick things off\r\n  this._create();\r\n}\r\n\r\nFlickity.defaults = {\r\n  accessibility: true,\r\n  // adaptiveHeight: false,\r\n  cellAlign: 'center',\r\n  // cellSelector: undefined,\r\n  // contain: false,\r\n  freeScrollFriction: 0.075, // friction when free-scrolling\r\n  friction: 0.28, // friction when selecting\r\n  namespaceJQueryEvents: true,\r\n  // initialIndex: 0,\r\n  percentPosition: true,\r\n  resize: true,\r\n  selectedAttraction: 0.025,\r\n  setGallerySize: true\r\n  // watchCSS: false,\r\n  // wrapAround: false\r\n};\r\n\r\n// hash of methods triggered on _create()\r\nFlickity.createMethods = [];\r\n\r\nvar proto = Flickity.prototype;\r\n// inherit EventEmitter\r\nutils.extend( proto, EvEmitter.prototype );\r\n\r\nproto._create = function() {\r\n  // add id for Flickity.data\r\n  var id = this.guid = ++GUID;\r\n  this.element.flickityGUID = id; // expando\r\n  instances[ id ] = this; // associate via id\r\n  // initial properties\r\n  this.selectedIndex = 0;\r\n  // how many frames slider has been in same position\r\n  this.restingFrames = 0;\r\n  // initial physics properties\r\n  this.x = 0;\r\n  this.velocity = 0;\r\n  this.originSide = this.options.rightToLeft ? 'right' : 'left';\r\n  // create viewport & slider\r\n  this.viewport = document.createElement('div');\r\n  this.viewport.className = 'flickity-viewport';\r\n  this._createSlider();\r\n\r\n  if ( this.options.resize || this.options.watchCSS ) {\r\n    window.addEventListener( 'resize', this );\r\n  }\r\n\r\n  // add listeners from on option\r\n  for ( var eventName in this.options.on ) {\r\n    var listener = this.options.on[ eventName ];\r\n    this.on( eventName, listener );\r\n  }\r\n\r\n  Flickity.createMethods.forEach( function( method ) {\r\n    this[ method ]();\r\n  }, this );\r\n\r\n  if ( this.options.watchCSS ) {\r\n    this.watchCSS();\r\n  } else {\r\n    this.activate();\r\n  }\r\n\r\n};\r\n\r\n/**\r\n * set options\r\n * @param {Object} opts\r\n */\r\nproto.option = function( opts ) {\r\n  utils.extend( this.options, opts );\r\n};\r\n\r\nproto.activate = function() {\r\n  if ( this.isActive ) {\r\n    return;\r\n  }\r\n  this.isActive = true;\r\n  this.element.classList.add('flickity-enabled');\r\n  if ( this.options.rightToLeft ) {\r\n    this.element.classList.add('flickity-rtl');\r\n  }\r\n\r\n  this.getSize();\r\n  // move initial cell elements so they can be loaded as cells\r\n  var cellElems = this._filterFindCellElements( this.element.children );\r\n  moveElements( cellElems, this.slider );\r\n  this.viewport.appendChild( this.slider );\r\n  this.element.appendChild( this.viewport );\r\n  // get cells from children\r\n  this.reloadCells();\r\n\r\n  if ( this.options.accessibility ) {\r\n    // allow element to focusable\r\n    this.element.tabIndex = 0;\r\n    // listen for key presses\r\n    this.element.addEventListener( 'keydown', this );\r\n  }\r\n\r\n  this.emitEvent('activate');\r\n  this.selectInitialIndex();\r\n  // flag for initial activation, for using initialIndex\r\n  this.isInitActivated = true;\r\n  // ready event. #493\r\n  this.dispatchEvent('ready');\r\n};\r\n\r\n// slider positions the cells\r\nproto._createSlider = function() {\r\n  // slider element does all the positioning\r\n  var slider = document.createElement('div');\r\n  slider.className = 'flickity-slider';\r\n  slider.style[ this.originSide ] = 0;\r\n  this.slider = slider;\r\n};\r\n\r\nproto._filterFindCellElements = function( elems ) {\r\n  return utils.filterFindElements( elems, this.options.cellSelector );\r\n};\r\n\r\n// goes through all children\r\nproto.reloadCells = function() {\r\n  // collection of item elements\r\n  this.cells = this._makeCells( this.slider.children );\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n};\r\n\r\n/**\r\n * turn elements into Flickity.Cells\r\n * @param {Array or NodeList or HTMLElement} elems\r\n * @returns {Array} items - collection of new Flickity Cells\r\n */\r\nproto._makeCells = function( elems ) {\r\n  var cellElems = this._filterFindCellElements( elems );\r\n\r\n  // create new Flickity for collection\r\n  var cells = cellElems.map( function( cellElem ) {\r\n    return new Cell( cellElem, this );\r\n  }, this );\r\n\r\n  return cells;\r\n};\r\n\r\nproto.getLastCell = function() {\r\n  return this.cells[ this.cells.length - 1 ];\r\n};\r\n\r\nproto.getLastSlide = function() {\r\n  return this.slides[ this.slides.length - 1 ];\r\n};\r\n\r\n// positions all cells\r\nproto.positionCells = function() {\r\n  // size all cells\r\n  this._sizeCells( this.cells );\r\n  // position all cells\r\n  this._positionCells( 0 );\r\n};\r\n\r\n/**\r\n * position certain cells\r\n * @param {Integer} index - which cell to start with\r\n */\r\nproto._positionCells = function( index ) {\r\n  index = index || 0;\r\n  // also measure maxCellHeight\r\n  // start 0 if positioning all cells\r\n  this.maxCellHeight = index ? this.maxCellHeight || 0 : 0;\r\n  var cellX = 0;\r\n  // get cellX\r\n  if ( index > 0 ) {\r\n    var startCell = this.cells[ index - 1 ];\r\n    cellX = startCell.x + startCell.size.outerWidth;\r\n  }\r\n  var len = this.cells.length;\r\n  for ( var i=index; i < len; i++ ) {\r\n    var cell = this.cells[i];\r\n    cell.setPosition( cellX );\r\n    cellX += cell.size.outerWidth;\r\n    this.maxCellHeight = Math.max( cell.size.outerHeight, this.maxCellHeight );\r\n  }\r\n  // keep track of cellX for wrap-around\r\n  this.slideableWidth = cellX;\r\n  // slides\r\n  this.updateSlides();\r\n  // contain slides target\r\n  this._containSlides();\r\n  // update slidesWidth\r\n  this.slidesWidth = len ? this.getLastSlide().target - this.slides[0].target : 0;\r\n};\r\n\r\n/**\r\n * cell.getSize() on multiple cells\r\n * @param {Array} cells\r\n */\r\nproto._sizeCells = function( cells ) {\r\n  cells.forEach( function( cell ) {\r\n    cell.getSize();\r\n  });\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nproto.updateSlides = function() {\r\n  this.slides = [];\r\n  if ( !this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var slide = new Slide( this );\r\n  this.slides.push( slide );\r\n  var isOriginLeft = this.originSide == 'left';\r\n  var nextMargin = isOriginLeft ? 'marginRight' : 'marginLeft';\r\n\r\n  var canCellFit = this._getCanCellFit();\r\n\r\n  this.cells.forEach( function( cell, i ) {\r\n    // just add cell if first cell in slide\r\n    if ( !slide.cells.length ) {\r\n      slide.addCell( cell );\r\n      return;\r\n    }\r\n\r\n    var slideWidth = ( slide.outerWidth - slide.firstMargin ) +\r\n      ( cell.size.outerWidth - cell.size[ nextMargin ] );\r\n\r\n    if ( canCellFit.call( this, i, slideWidth ) ) {\r\n      slide.addCell( cell );\r\n    } else {\r\n      // doesn't fit, new slide\r\n      slide.updateTarget();\r\n\r\n      slide = new Slide( this );\r\n      this.slides.push( slide );\r\n      slide.addCell( cell );\r\n    }\r\n  }, this );\r\n  // last slide\r\n  slide.updateTarget();\r\n  // update .selectedSlide\r\n  this.updateSelectedSlide();\r\n};\r\n\r\nproto._getCanCellFit = function() {\r\n  var groupCells = this.options.groupCells;\r\n  if ( !groupCells ) {\r\n    return function() {\r\n      return false;\r\n    };\r\n  } else if ( typeof groupCells == 'number' ) {\r\n    // group by number. 3 -> [0,1,2], [3,4,5], ...\r\n    var number = parseInt( groupCells, 10 );\r\n    return function( i ) {\r\n      return ( i % number ) !== 0;\r\n    };\r\n  }\r\n  // default, group by width of slide\r\n  // parse '75%\r\n  var percentMatch = typeof groupCells == 'string' &&\r\n    groupCells.match(/^(\\d+)%$/);\r\n  var percent = percentMatch ? parseInt( percentMatch[1], 10 ) / 100 : 1;\r\n  return function( i, slideWidth ) {\r\n    return slideWidth <= ( this.size.innerWidth + 1 ) * percent;\r\n  };\r\n};\r\n\r\n// alias _init for jQuery plugin .flickity()\r\nproto._init =\r\nproto.reposition = function() {\r\n  this.positionCells();\r\n  this.positionSliderAtSelected();\r\n};\r\n\r\nproto.getSize = function() {\r\n  this.size = getSize( this.element );\r\n  this.setCellAlign();\r\n  this.cursorPosition = this.size.innerWidth * this.cellAlign;\r\n};\r\n\r\nvar cellAlignShorthands = {\r\n  // cell align, then based on origin side\r\n  center: {\r\n    left: 0.5,\r\n    right: 0.5\r\n  },\r\n  left: {\r\n    left: 0,\r\n    right: 1\r\n  },\r\n  right: {\r\n    right: 0,\r\n    left: 1\r\n  }\r\n};\r\n\r\nproto.setCellAlign = function() {\r\n  var shorthand = cellAlignShorthands[ this.options.cellAlign ];\r\n  this.cellAlign = shorthand ? shorthand[ this.originSide ] : this.options.cellAlign;\r\n};\r\n\r\nproto.setGallerySize = function() {\r\n  if ( this.options.setGallerySize ) {\r\n    var height = this.options.adaptiveHeight && this.selectedSlide ?\r\n      this.selectedSlide.height : this.maxCellHeight;\r\n    this.viewport.style.height = height + 'px';\r\n  }\r\n};\r\n\r\nproto._getWrapShiftCells = function() {\r\n  // only for wrap-around\r\n  if ( !this.options.wrapAround ) {\r\n    return;\r\n  }\r\n  // unshift previous cells\r\n  this._unshiftCells( this.beforeShiftCells );\r\n  this._unshiftCells( this.afterShiftCells );\r\n  // get before cells\r\n  // initial gap\r\n  var gapX = this.cursorPosition;\r\n  var cellIndex = this.cells.length - 1;\r\n  this.beforeShiftCells = this._getGapCells( gapX, cellIndex, -1 );\r\n  // get after cells\r\n  // ending gap between last cell and end of gallery viewport\r\n  gapX = this.size.innerWidth - this.cursorPosition;\r\n  // start cloning at first cell, working forwards\r\n  this.afterShiftCells = this._getGapCells( gapX, 0, 1 );\r\n};\r\n\r\nproto._getGapCells = function( gapX, cellIndex, increment ) {\r\n  // keep adding cells until the cover the initial gap\r\n  var cells = [];\r\n  while ( gapX > 0 ) {\r\n    var cell = this.cells[ cellIndex ];\r\n    if ( !cell ) {\r\n      break;\r\n    }\r\n    cells.push( cell );\r\n    cellIndex += increment;\r\n    gapX -= cell.size.outerWidth;\r\n  }\r\n  return cells;\r\n};\r\n\r\n// ----- contain ----- //\r\n\r\n// contain cell targets so no excess sliding\r\nproto._containSlides = function() {\r\n  if ( !this.options.contain || this.options.wrapAround || !this.cells.length ) {\r\n    return;\r\n  }\r\n  var isRightToLeft = this.options.rightToLeft;\r\n  var beginMargin = isRightToLeft ? 'marginRight' : 'marginLeft';\r\n  var endMargin = isRightToLeft ? 'marginLeft' : 'marginRight';\r\n  var contentWidth = this.slideableWidth - this.getLastCell().size[ endMargin ];\r\n  // content is less than gallery size\r\n  var isContentSmaller = contentWidth < this.size.innerWidth;\r\n  // bounds\r\n  var beginBound = this.cursorPosition + this.cells[0].size[ beginMargin ];\r\n  var endBound = contentWidth - this.size.innerWidth * ( 1 - this.cellAlign );\r\n  // contain each cell target\r\n  this.slides.forEach( function( slide ) {\r\n    if ( isContentSmaller ) {\r\n      // all cells fit inside gallery\r\n      slide.target = contentWidth * this.cellAlign;\r\n    } else {\r\n      // contain to bounds\r\n      slide.target = Math.max( slide.target, beginBound );\r\n      slide.target = Math.min( slide.target, endBound );\r\n    }\r\n  }, this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n/**\r\n * emits events via eventEmitter and jQuery events\r\n * @param {String} type - name of event\r\n * @param {Event} event - original event\r\n * @param {Array} args - extra arguments\r\n */\r\nproto.dispatchEvent = function( type, event, args ) {\r\n  var emitArgs = event ? [ event ].concat( args ) : args;\r\n  this.emitEvent( type, emitArgs );\r\n\r\n  if ( jQuery && this.$element ) {\r\n    // default trigger with type if no event\r\n    type += this.options.namespaceJQueryEvents ? '.flickity' : '';\r\n    var $event = type;\r\n    if ( event ) {\r\n      // create jQuery event\r\n      var jQEvent = jQuery.Event( event );\r\n      jQEvent.type = type;\r\n      $event = jQEvent;\r\n    }\r\n    this.$element.trigger( $event, args );\r\n  }\r\n};\r\n\r\n// -------------------------- select -------------------------- //\r\n\r\n/**\r\n * @param {Integer} index - index of the slide\r\n * @param {Boolean} isWrap - will wrap-around to last/first if at the end\r\n * @param {Boolean} isInstant - will immediately set position at selected cell\r\n */\r\nproto.select = function( index, isWrap, isInstant ) {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  index = parseInt( index, 10 );\r\n  this._wrapSelect( index );\r\n\r\n  if ( this.options.wrapAround || isWrap ) {\r\n    index = utils.modulo( index, this.slides.length );\r\n  }\r\n  // bail if invalid index\r\n  if ( !this.slides[ index ] ) {\r\n    return;\r\n  }\r\n  var prevIndex = this.selectedIndex;\r\n  this.selectedIndex = index;\r\n  this.updateSelectedSlide();\r\n  if ( isInstant ) {\r\n    this.positionSliderAtSelected();\r\n  } else {\r\n    this.startAnimation();\r\n  }\r\n  if ( this.options.adaptiveHeight ) {\r\n    this.setGallerySize();\r\n  }\r\n  // events\r\n  this.dispatchEvent( 'select', null, [ index ] );\r\n  // change event if new index\r\n  if ( index != prevIndex ) {\r\n    this.dispatchEvent( 'change', null, [ index ] );\r\n  }\r\n  // old v1 event name, remove in v3\r\n  this.dispatchEvent('cellSelect');\r\n};\r\n\r\n// wraps position for wrapAround, to move to closest slide. #113\r\nproto._wrapSelect = function( index ) {\r\n  var len = this.slides.length;\r\n  var isWrapping = this.options.wrapAround && len > 1;\r\n  if ( !isWrapping ) {\r\n    return index;\r\n  }\r\n  var wrapIndex = utils.modulo( index, len );\r\n  // go to shortest\r\n  var delta = Math.abs( wrapIndex - this.selectedIndex );\r\n  var backWrapDelta = Math.abs( ( wrapIndex + len ) - this.selectedIndex );\r\n  var forewardWrapDelta = Math.abs( ( wrapIndex - len ) - this.selectedIndex );\r\n  if ( !this.isDragSelect && backWrapDelta < delta ) {\r\n    index += len;\r\n  } else if ( !this.isDragSelect && forewardWrapDelta < delta ) {\r\n    index -= len;\r\n  }\r\n  // wrap position so slider is within normal area\r\n  if ( index < 0 ) {\r\n    this.x -= this.slideableWidth;\r\n  } else if ( index >= len ) {\r\n    this.x += this.slideableWidth;\r\n  }\r\n};\r\n\r\nproto.previous = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex - 1, isWrap, isInstant );\r\n};\r\n\r\nproto.next = function( isWrap, isInstant ) {\r\n  this.select( this.selectedIndex + 1, isWrap, isInstant );\r\n};\r\n\r\nproto.updateSelectedSlide = function() {\r\n  var slide = this.slides[ this.selectedIndex ];\r\n  // selectedIndex could be outside of slides, if triggered before resize()\r\n  if ( !slide ) {\r\n    return;\r\n  }\r\n  // unselect previous selected slide\r\n  this.unselectSelectedSlide();\r\n  // update new selected slide\r\n  this.selectedSlide = slide;\r\n  slide.select();\r\n  this.selectedCells = slide.cells;\r\n  this.selectedElements = slide.getCellElements();\r\n  // HACK: selectedCell & selectedElement is first cell in slide, backwards compatibility\r\n  // Remove in v3?\r\n  this.selectedCell = slide.cells[0];\r\n  this.selectedElement = this.selectedElements[0];\r\n};\r\n\r\nproto.unselectSelectedSlide = function() {\r\n  if ( this.selectedSlide ) {\r\n    this.selectedSlide.unselect();\r\n  }\r\n};\r\n\r\nproto.selectInitialIndex = function() {\r\n  var initialIndex = this.options.initialIndex;\r\n  // already activated, select previous selectedIndex\r\n  if ( this.isInitActivated ) {\r\n    this.select( this.selectedIndex, false, true );\r\n    return;\r\n  }\r\n  // select with selector string\r\n  if ( initialIndex && typeof initialIndex == 'string' ) {\r\n    var cell = this.queryCell( initialIndex );\r\n    if ( cell ) {\r\n      this.selectCell( initialIndex, false, true );\r\n      return;\r\n    }\r\n  }\r\n\r\n  var index = 0;\r\n  // select with number\r\n  if ( initialIndex && this.slides[ initialIndex ] ) {\r\n    index = initialIndex;\r\n  }\r\n  // select instantly\r\n  this.select( index, false, true );\r\n};\r\n\r\n/**\r\n * select slide from number or cell element\r\n * @param {Element or Number} elem\r\n */\r\nproto.selectCell = function( value, isWrap, isInstant ) {\r\n  // get cell\r\n  var cell = this.queryCell( value );\r\n  if ( !cell ) {\r\n    return;\r\n  }\r\n\r\n  var index = this.getCellSlideIndex( cell );\r\n  this.select( index, isWrap, isInstant );\r\n};\r\n\r\nproto.getCellSlideIndex = function( cell ) {\r\n  // get index of slides that has cell\r\n  for ( var i=0; i < this.slides.length; i++ ) {\r\n    var slide = this.slides[i];\r\n    var index = slide.cells.indexOf( cell );\r\n    if ( index != -1 ) {\r\n      return i;\r\n    }\r\n  }\r\n};\r\n\r\n// -------------------------- get cells -------------------------- //\r\n\r\n/**\r\n * get Flickity.Cell, given an Element\r\n * @param {Element} elem\r\n * @returns {Flickity.Cell} item\r\n */\r\nproto.getCell = function( elem ) {\r\n  // loop through cells to get the one that matches\r\n  for ( var i=0; i < this.cells.length; i++ ) {\r\n    var cell = this.cells[i];\r\n    if ( cell.element == elem ) {\r\n      return cell;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * get collection of Flickity.Cells, given Elements\r\n * @param {Element, Array, NodeList} elems\r\n * @returns {Array} cells - Flickity.Cells\r\n */\r\nproto.getCells = function( elems ) {\r\n  elems = utils.makeArray( elems );\r\n  var cells = [];\r\n  elems.forEach( function( elem ) {\r\n    var cell = this.getCell( elem );\r\n    if ( cell ) {\r\n      cells.push( cell );\r\n    }\r\n  }, this );\r\n  return cells;\r\n};\r\n\r\n/**\r\n * get cell elements\r\n * @returns {Array} cellElems\r\n */\r\nproto.getCellElements = function() {\r\n  return this.cells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n};\r\n\r\n/**\r\n * get parent cell from an element\r\n * @param {Element} elem\r\n * @returns {Flickit.Cell} cell\r\n */\r\nproto.getParentCell = function( elem ) {\r\n  // first check if elem is cell\r\n  var cell = this.getCell( elem );\r\n  if ( cell ) {\r\n    return cell;\r\n  }\r\n  // try to get parent cell elem\r\n  elem = utils.getParent( elem, '.flickity-slider > *' );\r\n  return this.getCell( elem );\r\n};\r\n\r\n/**\r\n * get cells adjacent to a slide\r\n * @param {Integer} adjCount - number of adjacent slides\r\n * @param {Integer} index - index of slide to start\r\n * @returns {Array} cells - array of Flickity.Cells\r\n */\r\nproto.getAdjacentCellElements = function( adjCount, index ) {\r\n  if ( !adjCount ) {\r\n    return this.selectedSlide.getCellElements();\r\n  }\r\n  index = index === undefined ? this.selectedIndex : index;\r\n\r\n  var len = this.slides.length;\r\n  if ( 1 + ( adjCount * 2 ) >= len ) {\r\n    return this.getCellElements();\r\n  }\r\n\r\n  var cellElems = [];\r\n  for ( var i = index - adjCount; i <= index + adjCount ; i++ ) {\r\n    var slideIndex = this.options.wrapAround ? utils.modulo( i, len ) : i;\r\n    var slide = this.slides[ slideIndex ];\r\n    if ( slide ) {\r\n      cellElems = cellElems.concat( slide.getCellElements() );\r\n    }\r\n  }\r\n  return cellElems;\r\n};\r\n\r\n/**\r\n * select slide from number or cell element\r\n * @param {Element, Selector String, or Number} selector\r\n */\r\nproto.queryCell = function( selector ) {\r\n  if ( typeof selector == 'number' ) {\r\n    // use number as index\r\n    return this.cells[ selector ];\r\n  }\r\n  if ( typeof selector == 'string' ) {\r\n    // do not select invalid selectors from hash: #123, #/. #791\r\n    if ( selector.match(/^[#\\.]?[\\d\\/]/) ) {\r\n      return;\r\n    }\r\n    // use string as selector, get element\r\n    selector = this.element.querySelector( selector );\r\n  }\r\n  // get cell from element\r\n  return this.getCell( selector );\r\n};\r\n\r\n// -------------------------- events -------------------------- //\r\n\r\nproto.uiChange = function() {\r\n  this.emitEvent('uiChange');\r\n};\r\n\r\n// keep focus on element when child UI elements are clicked\r\nproto.childUIPointerDown = function( event ) {\r\n  // HACK iOS does not allow touch events to bubble up?!\r\n  if ( event.type != 'touchstart' ) {\r\n    event.preventDefault();\r\n  }\r\n  this.focus();\r\n};\r\n\r\n// ----- resize ----- //\r\n\r\nproto.onresize = function() {\r\n  this.watchCSS();\r\n  this.resize();\r\n};\r\n\r\nutils.debounceMethod( Flickity, 'onresize', 150 );\r\n\r\nproto.resize = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.getSize();\r\n  // wrap values\r\n  if ( this.options.wrapAround ) {\r\n    this.x = utils.modulo( this.x, this.slideableWidth );\r\n  }\r\n  this.positionCells();\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  this.emitEvent('resize');\r\n  // update selected index for group slides, instant\r\n  // TODO: position can be lost between groups of various numbers\r\n  var selectedElement = this.selectedElements && this.selectedElements[0];\r\n  this.selectCell( selectedElement, false, true );\r\n};\r\n\r\n// watches the :after property, activates/deactivates\r\nproto.watchCSS = function() {\r\n  var watchOption = this.options.watchCSS;\r\n  if ( !watchOption ) {\r\n    return;\r\n  }\r\n\r\n  var afterContent = getComputedStyle( this.element, ':after' ).content;\r\n  // activate if :after { content: 'flickity' }\r\n  if ( afterContent.indexOf('flickity') != -1 ) {\r\n    this.activate();\r\n  } else {\r\n    this.deactivate();\r\n  }\r\n};\r\n\r\n// ----- keydown ----- //\r\n\r\n// go previous/next if left/right keys pressed\r\nproto.onkeydown = function( event ) {\r\n  // only work if element is in focus\r\n  var isNotFocused = document.activeElement && document.activeElement != this.element;\r\n  if ( !this.options.accessibility ||isNotFocused ) {\r\n    return;\r\n  }\r\n\r\n  var handler = Flickity.keyboardHandlers[ event.keyCode ];\r\n  if ( handler ) {\r\n    handler.call( this );\r\n  }\r\n};\r\n\r\nFlickity.keyboardHandlers = {\r\n  // left arrow\r\n  37: function() {\r\n    var leftMethod = this.options.rightToLeft ? 'next' : 'previous';\r\n    this.uiChange();\r\n    this[ leftMethod ]();\r\n  },\r\n  // right arrow\r\n  39: function() {\r\n    var rightMethod = this.options.rightToLeft ? 'previous' : 'next';\r\n    this.uiChange();\r\n    this[ rightMethod ]();\r\n  },\r\n};\r\n\r\n// ----- focus ----- //\r\n\r\nproto.focus = function() {\r\n  // TODO remove scrollTo once focus options gets more support\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus#Browser_compatibility\r\n  var prevScrollY = window.pageYOffset;\r\n  this.element.focus({ preventScroll: true });\r\n  // hack to fix scroll jump after focus, #76\r\n  if ( window.pageYOffset != prevScrollY ) {\r\n    window.scrollTo( window.pageXOffset, prevScrollY );\r\n  }\r\n};\r\n\r\n// -------------------------- destroy -------------------------- //\r\n\r\n// deactivate all Flickity functionality, but keep stuff available\r\nproto.deactivate = function() {\r\n  if ( !this.isActive ) {\r\n    return;\r\n  }\r\n  this.element.classList.remove('flickity-enabled');\r\n  this.element.classList.remove('flickity-rtl');\r\n  this.unselectSelectedSlide();\r\n  // destroy cells\r\n  this.cells.forEach( function( cell ) {\r\n    cell.destroy();\r\n  });\r\n  this.element.removeChild( this.viewport );\r\n  // move child elements back into element\r\n  moveElements( this.slider.children, this.element );\r\n  if ( this.options.accessibility ) {\r\n    this.element.removeAttribute('tabIndex');\r\n    this.element.removeEventListener( 'keydown', this );\r\n  }\r\n  // set flags\r\n  this.isActive = false;\r\n  this.emitEvent('deactivate');\r\n};\r\n\r\nproto.destroy = function() {\r\n  this.deactivate();\r\n  window.removeEventListener( 'resize', this );\r\n  this.allOff();\r\n  this.emitEvent('destroy');\r\n  if ( jQuery && this.$element ) {\r\n    jQuery.removeData( this.element, 'flickity' );\r\n  }\r\n  delete this.element.flickityGUID;\r\n  delete instances[ this.guid ];\r\n};\r\n\r\n// -------------------------- prototype -------------------------- //\r\n\r\nutils.extend( proto, animatePrototype );\r\n\r\n// -------------------------- extras -------------------------- //\r\n\r\n/**\r\n * get Flickity instance from element\r\n * @param {Element} elem\r\n * @returns {Flickity}\r\n */\r\nFlickity.data = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var id = elem && elem.flickityGUID;\r\n  return id && instances[ id ];\r\n};\r\n\r\nutils.htmlInit( Flickity, 'flickity' );\r\n\r\nif ( jQuery && jQuery.bridget ) {\r\n  jQuery.bridget( 'flickity', Flickity );\r\n}\r\n\r\n// set internal jQuery, for Webpack + jQuery v3, #478\r\nFlickity.setJQuery = function( jq ) {\r\n  jQuery = jq;\r\n};\r\n\r\nFlickity.Cell = Cell;\r\nFlickity.Slide = Slide;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Unipointer v2.3.0\r\n * base class for doing one thing with pointer event\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*global define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unipointer/unipointer',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unipointer = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nfunction noop() {}\r\n\r\nfunction Unipointer() {}\r\n\r\n// inherit EvEmitter\r\nvar proto = Unipointer.prototype = Object.create( EvEmitter.prototype );\r\n\r\nproto.bindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, true );\r\n};\r\n\r\nproto.unbindStartEvent = function( elem ) {\r\n  this._bindStartEvent( elem, false );\r\n};\r\n\r\n/**\r\n * Add or remove start event\r\n * @param {Boolean} isAdd - remove if falsey\r\n */\r\nproto._bindStartEvent = function( elem, isAdd ) {\r\n  // munge isAdd, default to true\r\n  isAdd = isAdd === undefined ? true : isAdd;\r\n  var bindMethod = isAdd ? 'addEventListener' : 'removeEventListener';\r\n\r\n  // default to mouse events\r\n  var startEvent = 'mousedown';\r\n  if ( window.PointerEvent ) {\r\n    // Pointer Events\r\n    startEvent = 'pointerdown';\r\n  } else if ( 'ontouchstart' in window ) {\r\n    // Touch Events. iOS Safari\r\n    startEvent = 'touchstart';\r\n  }\r\n  elem[ bindMethod ]( startEvent, this );\r\n};\r\n\r\n// trigger handler methods for events\r\nproto.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\n// returns the touch that we're keeping track of\r\nproto.getTouch = function( touches ) {\r\n  for ( var i=0; i < touches.length; i++ ) {\r\n    var touch = touches[i];\r\n    if ( touch.identifier == this.pointerIdentifier ) {\r\n      return touch;\r\n    }\r\n  }\r\n};\r\n\r\n// ----- start event ----- //\r\n\r\nproto.onmousedown = function( event ) {\r\n  // dismiss clicks from right or middle buttons\r\n  var button = event.button;\r\n  if ( button && ( button !== 0 && button !== 1 ) ) {\r\n    return;\r\n  }\r\n  this._pointerDown( event, event );\r\n};\r\n\r\nproto.ontouchstart = function( event ) {\r\n  this._pointerDown( event, event.changedTouches[0] );\r\n};\r\n\r\nproto.onpointerdown = function( event ) {\r\n  this._pointerDown( event, event );\r\n};\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto._pointerDown = function( event, pointer ) {\r\n  // dismiss right click and other pointers\r\n  // button = 0 is okay, 1-4 not\r\n  if ( event.button || this.isPointerDown ) {\r\n    return;\r\n  }\r\n\r\n  this.isPointerDown = true;\r\n  // save pointer identifier to match up touch events\r\n  this.pointerIdentifier = pointer.pointerId !== undefined ?\r\n    // pointerId for pointer events, touch.indentifier for touch events\r\n    pointer.pointerId : pointer.identifier;\r\n\r\n  this.pointerDown( event, pointer );\r\n};\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// hash of events to be bound after start event\r\nvar postStartEvents = {\r\n  mousedown: [ 'mousemove', 'mouseup' ],\r\n  touchstart: [ 'touchmove', 'touchend', 'touchcancel' ],\r\n  pointerdown: [ 'pointermove', 'pointerup', 'pointercancel' ],\r\n};\r\n\r\nproto._bindPostStartEvents = function( event ) {\r\n  if ( !event ) {\r\n    return;\r\n  }\r\n  // get proper events to match start event\r\n  var events = postStartEvents[ event.type ];\r\n  // bind events to node\r\n  events.forEach( function( eventName ) {\r\n    window.addEventListener( eventName, this );\r\n  }, this );\r\n  // save these arguments\r\n  this._boundPointerEvents = events;\r\n};\r\n\r\nproto._unbindPostStartEvents = function() {\r\n  // check for _boundEvents, in case dragEnd triggered twice (old IE8 bug)\r\n  if ( !this._boundPointerEvents ) {\r\n    return;\r\n  }\r\n  this._boundPointerEvents.forEach( function( eventName ) {\r\n    window.removeEventListener( eventName, this );\r\n  }, this );\r\n\r\n  delete this._boundPointerEvents;\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\nproto.onmousemove = function( event ) {\r\n  this._pointerMove( event, event );\r\n};\r\n\r\nproto.onpointermove = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerMove( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchmove = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerMove( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerMove = function( event, pointer ) {\r\n  this.pointerMove( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerMove = function( event, pointer ) {\r\n  this.emitEvent( 'pointerMove', [ event, pointer ] );\r\n};\r\n\r\n// ----- end event ----- //\r\n\r\n\r\nproto.onmouseup = function( event ) {\r\n  this._pointerUp( event, event );\r\n};\r\n\r\nproto.onpointerup = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerUp( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchend = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerUp( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerUp = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerUp( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n};\r\n\r\n// ----- pointer done ----- //\r\n\r\n// triggered on pointer up & pointer cancel\r\nproto._pointerDone = function() {\r\n  this._pointerReset();\r\n  this._unbindPostStartEvents();\r\n  this.pointerDone();\r\n};\r\n\r\nproto._pointerReset = function() {\r\n  // reset properties\r\n  this.isPointerDown = false;\r\n  delete this.pointerIdentifier;\r\n};\r\n\r\nproto.pointerDone = noop;\r\n\r\n// ----- pointer cancel ----- //\r\n\r\nproto.onpointercancel = function( event ) {\r\n  if ( event.pointerId == this.pointerIdentifier ) {\r\n    this._pointerCancel( event, event );\r\n  }\r\n};\r\n\r\nproto.ontouchcancel = function( event ) {\r\n  var touch = this.getTouch( event.changedTouches );\r\n  if ( touch ) {\r\n    this._pointerCancel( event, touch );\r\n  }\r\n};\r\n\r\n/**\r\n * pointer cancel\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n * @private\r\n */\r\nproto._pointerCancel = function( event, pointer ) {\r\n  this._pointerDone();\r\n  this.pointerCancel( event, pointer );\r\n};\r\n\r\n// public\r\nproto.pointerCancel = function( event, pointer ) {\r\n  this.emitEvent( 'pointerCancel', [ event, pointer ] );\r\n};\r\n\r\n// -----  ----- //\r\n\r\n// utility function for getting x/y coords from event\r\nUnipointer.getPointerPoint = function( pointer ) {\r\n  return {\r\n    x: pointer.pageX,\r\n    y: pointer.pageY\r\n  };\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Unipointer;\r\n\r\n}));\r\n\r\n/*!\r\n * Unidragger v2.3.0\r\n * Draggable base class\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, unused: true, undef: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'unidragger/unidragger',[\r\n      'unipointer/unipointer'\r\n    ], function( Unipointer ) {\r\n      return factory( window, Unipointer );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('unipointer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Unidragger = factory(\r\n      window,\r\n      window.Unipointer\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Unipointer ) {\r\n\r\n\r\n\r\n// -------------------------- Unidragger -------------------------- //\r\n\r\nfunction Unidragger() {}\r\n\r\n// inherit Unipointer & EvEmitter\r\nvar proto = Unidragger.prototype = Object.create( Unipointer.prototype );\r\n\r\n// ----- bind start ----- //\r\n\r\nproto.bindHandles = function() {\r\n  this._bindHandles( true );\r\n};\r\n\r\nproto.unbindHandles = function() {\r\n  this._bindHandles( false );\r\n};\r\n\r\n/**\r\n * Add or remove start event\r\n * @param {Boolean} isAdd\r\n */\r\nproto._bindHandles = function( isAdd ) {\r\n  // munge isAdd, default to true\r\n  isAdd = isAdd === undefined ? true : isAdd;\r\n  // bind each handle\r\n  var bindMethod = isAdd ? 'addEventListener' : 'removeEventListener';\r\n  var touchAction = isAdd ? this._touchActionValue : '';\r\n  for ( var i=0; i < this.handles.length; i++ ) {\r\n    var handle = this.handles[i];\r\n    this._bindStartEvent( handle, isAdd );\r\n    handle[ bindMethod ]( 'click', this );\r\n    // touch-action: none to override browser touch gestures. metafizzy/flickity#540\r\n    if ( window.PointerEvent ) {\r\n      handle.style.touchAction = touchAction;\r\n    }\r\n  }\r\n};\r\n\r\n// prototype so it can be overwriteable by Flickity\r\nproto._touchActionValue = 'none';\r\n\r\n// ----- start event ----- //\r\n\r\n/**\r\n * pointer start\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerDown = function( event, pointer ) {\r\n  var isOkay = this.okayPointerDown( event );\r\n  if ( !isOkay ) {\r\n    return;\r\n  }\r\n  // track start event position\r\n  this.pointerDownPointer = pointer;\r\n\r\n  event.preventDefault();\r\n  this.pointerDownBlur();\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  this.emitEvent( 'pointerDown', [ event, pointer ] );\r\n};\r\n\r\n// nodes that have text fields\r\nvar cursorNodes = {\r\n  TEXTAREA: true,\r\n  INPUT: true,\r\n  SELECT: true,\r\n  OPTION: true,\r\n};\r\n\r\n// input types that do not have text fields\r\nvar clickTypes = {\r\n  radio: true,\r\n  checkbox: true,\r\n  button: true,\r\n  submit: true,\r\n  image: true,\r\n  file: true,\r\n};\r\n\r\n// dismiss inputs with text fields. flickity#403, flickity#404\r\nproto.okayPointerDown = function( event ) {\r\n  var isCursorNode = cursorNodes[ event.target.nodeName ];\r\n  var isClickType = clickTypes[ event.target.type ];\r\n  var isOkay = !isCursorNode || isClickType;\r\n  if ( !isOkay ) {\r\n    this._pointerReset();\r\n  }\r\n  return isOkay;\r\n};\r\n\r\n// kludge to blur previously focused input\r\nproto.pointerDownBlur = function() {\r\n  var focused = document.activeElement;\r\n  // do not blur body for IE10, metafizzy/flickity#117\r\n  var canBlur = focused && focused.blur && focused != document.body;\r\n  if ( canBlur ) {\r\n    focused.blur();\r\n  }\r\n};\r\n\r\n// ----- move event ----- //\r\n\r\n/**\r\n * drag move\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.emitEvent( 'pointerMove', [ event, pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\n// base pointer move logic\r\nproto._dragPointerMove = function( event, pointer ) {\r\n  var moveVector = {\r\n    x: pointer.pageX - this.pointerDownPointer.pageX,\r\n    y: pointer.pageY - this.pointerDownPointer.pageY\r\n  };\r\n  // start drag if pointer has moved far enough to start drag\r\n  if ( !this.isDragging && this.hasDragStarted( moveVector ) ) {\r\n    this._dragStart( event, pointer );\r\n  }\r\n  return moveVector;\r\n};\r\n\r\n// condition if pointer has moved far enough to start drag\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > 3 || Math.abs( moveVector.y ) > 3;\r\n};\r\n\r\n// ----- end event ----- //\r\n\r\n/**\r\n * pointer up\r\n * @param {Event} event\r\n * @param {Event or Touch} pointer\r\n */\r\nproto.pointerUp = function( event, pointer ) {\r\n  this.emitEvent( 'pointerUp', [ event, pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto._dragPointerUp = function( event, pointer ) {\r\n  if ( this.isDragging ) {\r\n    this._dragEnd( event, pointer );\r\n  } else {\r\n    // pointer didn't move enough for drag to start\r\n    this._staticClick( event, pointer );\r\n  }\r\n};\r\n\r\n// -------------------------- drag -------------------------- //\r\n\r\n// dragStart\r\nproto._dragStart = function( event, pointer ) {\r\n  this.isDragging = true;\r\n  // prevent clicks\r\n  this.isPreventingClicks = true;\r\n  this.dragStart( event, pointer );\r\n};\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  this.emitEvent( 'dragStart', [ event, pointer ] );\r\n};\r\n\r\n// dragMove\r\nproto._dragMove = function( event, pointer, moveVector ) {\r\n  // do not drag if not dragging yet\r\n  if ( !this.isDragging ) {\r\n    return;\r\n  }\r\n\r\n  this.dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  event.preventDefault();\r\n  this.emitEvent( 'dragMove', [ event, pointer, moveVector ] );\r\n};\r\n\r\n// dragEnd\r\nproto._dragEnd = function( event, pointer ) {\r\n  // set flags\r\n  this.isDragging = false;\r\n  // re-enable clicking async\r\n  setTimeout( function() {\r\n    delete this.isPreventingClicks;\r\n  }.bind( this ) );\r\n\r\n  this.dragEnd( event, pointer );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  this.emitEvent( 'dragEnd', [ event, pointer ] );\r\n};\r\n\r\n// ----- onclick ----- //\r\n\r\n// handle all clicks and prevent clicks when dragging\r\nproto.onclick = function( event ) {\r\n  if ( this.isPreventingClicks ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\n// triggered after pointer down & up with no/tiny movement\r\nproto._staticClick = function( event, pointer ) {\r\n  // ignore emulated mouse up clicks\r\n  if ( this.isIgnoringMouseUp && event.type == 'mouseup' ) {\r\n    return;\r\n  }\r\n\r\n  this.staticClick( event, pointer );\r\n\r\n  // set flag for emulated clicks 300ms after touchend\r\n  if ( event.type != 'mouseup' ) {\r\n    this.isIgnoringMouseUp = true;\r\n    // reset flag after 300ms\r\n    setTimeout( function() {\r\n      delete this.isIgnoringMouseUp;\r\n    }.bind( this ), 400 );\r\n  }\r\n};\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  this.emitEvent( 'staticClick', [ event, pointer ] );\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nUnidragger.getPointerPoint = Unipointer.getPointerPoint;\r\n\r\n// -----  ----- //\r\n\r\nreturn Unidragger;\r\n\r\n}));\r\n\r\n// drag\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/drag',[\r\n      './flickity',\r\n      'unidragger/unidragger',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, Unidragger, utils ) {\r\n      return factory( window, Flickity, Unidragger, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('unidragger'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.Unidragger,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, Unidragger, utils ) {\r\n\r\n\r\n\r\n// ----- defaults ----- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  draggable: '>1',\r\n  dragThreshold: 3,\r\n});\r\n\r\n// ----- create ----- //\r\n\r\nFlickity.createMethods.push('_createDrag');\r\n\r\n// -------------------------- drag prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\nutils.extend( proto, Unidragger.prototype );\r\nproto._touchActionValue = 'pan-y';\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nvar isTouch = 'createTouch' in document;\r\nvar isTouchmoveScrollCanceled = false;\r\n\r\nproto._createDrag = function() {\r\n  this.on( 'activate', this.onActivateDrag );\r\n  this.on( 'uiChange', this._uiChangeDrag );\r\n  this.on( 'deactivate', this.onDeactivateDrag );\r\n  this.on( 'cellChange', this.updateDraggable );\r\n  // TODO updateDraggable on resize? if groupCells & slides change\r\n  // HACK - add seemingly innocuous handler to fix iOS 10 scroll behavior\r\n  // #457, RubaXa/Sortable#973\r\n  if ( isTouch && !isTouchmoveScrollCanceled ) {\r\n    window.addEventListener( 'touchmove', function() {});\r\n    isTouchmoveScrollCanceled = true;\r\n  }\r\n};\r\n\r\nproto.onActivateDrag = function() {\r\n  this.handles = [ this.viewport ];\r\n  this.bindHandles();\r\n  this.updateDraggable();\r\n};\r\n\r\nproto.onDeactivateDrag = function() {\r\n  this.unbindHandles();\r\n  this.element.classList.remove('is-draggable');\r\n};\r\n\r\nproto.updateDraggable = function() {\r\n  // disable dragging if less than 2 slides. #278\r\n  if ( this.options.draggable == '>1' ) {\r\n    this.isDraggable = this.slides.length > 1;\r\n  } else {\r\n    this.isDraggable = this.options.draggable;\r\n  }\r\n  if ( this.isDraggable ) {\r\n    this.element.classList.add('is-draggable');\r\n  } else {\r\n    this.element.classList.remove('is-draggable');\r\n  }\r\n};\r\n\r\n// backwards compatibility\r\nproto.bindDrag = function() {\r\n  this.options.draggable = true;\r\n  this.updateDraggable();\r\n};\r\n\r\nproto.unbindDrag = function() {\r\n  this.options.draggable = false;\r\n  this.updateDraggable();\r\n};\r\n\r\nproto._uiChangeDrag = function() {\r\n  delete this.isFreeScrolling;\r\n};\r\n\r\n// -------------------------- pointer events -------------------------- //\r\n\r\nproto.pointerDown = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    this._pointerDownDefault( event, pointer );\r\n    return;\r\n  }\r\n  var isOkay = this.okayPointerDown( event );\r\n  if ( !isOkay ) {\r\n    return;\r\n  }\r\n\r\n  this._pointerDownPreventDefault( event );\r\n  this.pointerDownFocus( event );\r\n  // blur\r\n  if ( document.activeElement != this.element ) {\r\n    // do not blur if already focused\r\n    this.pointerDownBlur();\r\n  }\r\n\r\n  // stop if it was moving\r\n  this.dragX = this.x;\r\n  this.viewport.classList.add('is-pointer-down');\r\n  // track scrolling\r\n  this.pointerDownScroll = getScrollPosition();\r\n  window.addEventListener( 'scroll', this );\r\n\r\n  this._pointerDownDefault( event, pointer );\r\n};\r\n\r\n// default pointerDown logic, used for staticClick\r\nproto._pointerDownDefault = function( event, pointer ) {\r\n  // track start event position\r\n  // Safari 9 overrides pageX and pageY. These values needs to be copied. #779\r\n  this.pointerDownPointer = {\r\n    pageX: pointer.pageX,\r\n    pageY: pointer.pageY,\r\n  };\r\n  // bind move and end events\r\n  this._bindPostStartEvents( event );\r\n  this.dispatchEvent( 'pointerDown', event, [ pointer ] );\r\n};\r\n\r\nvar focusNodes = {\r\n  INPUT: true,\r\n  TEXTAREA: true,\r\n  SELECT: true,\r\n};\r\n\r\nproto.pointerDownFocus = function( event ) {\r\n  var isFocusNode = focusNodes[ event.target.nodeName ];\r\n  if ( !isFocusNode ) {\r\n    this.focus();\r\n  }\r\n};\r\n\r\nproto._pointerDownPreventDefault = function( event ) {\r\n  var isTouchStart = event.type == 'touchstart';\r\n  var isTouchPointer = event.pointerType == 'touch';\r\n  var isFocusNode = focusNodes[ event.target.nodeName ];\r\n  if ( !isTouchStart && !isTouchPointer && !isFocusNode ) {\r\n    event.preventDefault();\r\n  }\r\n};\r\n\r\n// ----- move ----- //\r\n\r\nproto.hasDragStarted = function( moveVector ) {\r\n  return Math.abs( moveVector.x ) > this.options.dragThreshold;\r\n};\r\n\r\n// ----- up ----- //\r\n\r\nproto.pointerUp = function( event, pointer ) {\r\n  delete this.isTouchScrolling;\r\n  this.viewport.classList.remove('is-pointer-down');\r\n  this.dispatchEvent( 'pointerUp', event, [ pointer ] );\r\n  this._dragPointerUp( event, pointer );\r\n};\r\n\r\nproto.pointerDone = function() {\r\n  window.removeEventListener( 'scroll', this );\r\n  delete this.pointerDownScroll;\r\n};\r\n\r\n// -------------------------- dragging -------------------------- //\r\n\r\nproto.dragStart = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  this.dragStartPosition = this.x;\r\n  this.startAnimation();\r\n  window.removeEventListener( 'scroll', this );\r\n  this.dispatchEvent( 'dragStart', event, [ pointer ] );\r\n};\r\n\r\nproto.pointerMove = function( event, pointer ) {\r\n  var moveVector = this._dragPointerMove( event, pointer );\r\n  this.dispatchEvent( 'pointerMove', event, [ pointer, moveVector ] );\r\n  this._dragMove( event, pointer, moveVector );\r\n};\r\n\r\nproto.dragMove = function( event, pointer, moveVector ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  event.preventDefault();\r\n\r\n  this.previousDragX = this.dragX;\r\n  // reverse if right-to-left\r\n  var direction = this.options.rightToLeft ? -1 : 1;\r\n  if ( this.options.wrapAround ) {\r\n    // wrap around move. #589\r\n    moveVector.x = moveVector.x % this.slideableWidth;\r\n  }\r\n  var dragX = this.dragStartPosition + moveVector.x * direction;\r\n\r\n  if ( !this.options.wrapAround && this.slides.length ) {\r\n    // slow drag\r\n    var originBound = Math.max( -this.slides[0].target, this.dragStartPosition );\r\n    dragX = dragX > originBound ? ( dragX + originBound ) * 0.5 : dragX;\r\n    var endBound = Math.min( -this.getLastSlide().target, this.dragStartPosition );\r\n    dragX = dragX < endBound ? ( dragX + endBound ) * 0.5 : dragX;\r\n  }\r\n\r\n  this.dragX = dragX;\r\n\r\n  this.dragMoveTime = new Date();\r\n  this.dispatchEvent( 'dragMove', event, [ pointer, moveVector ] );\r\n};\r\n\r\nproto.dragEnd = function( event, pointer ) {\r\n  if ( !this.isDraggable ) {\r\n    return;\r\n  }\r\n  if ( this.options.freeScroll ) {\r\n    this.isFreeScrolling = true;\r\n  }\r\n  // set selectedIndex based on where flick will end up\r\n  var index = this.dragEndRestingSelect();\r\n\r\n  if ( this.options.freeScroll && !this.options.wrapAround ) {\r\n    // if free-scroll & not wrap around\r\n    // do not free-scroll if going outside of bounding slides\r\n    // so bounding slides can attract slider, and keep it in bounds\r\n    var restingX = this.getRestingPosition();\r\n    this.isFreeScrolling = -restingX > this.slides[0].target &&\r\n      -restingX < this.getLastSlide().target;\r\n  } else if ( !this.options.freeScroll && index == this.selectedIndex ) {\r\n    // boost selection if selected index has not changed\r\n    index += this.dragEndBoostSelect();\r\n  }\r\n  delete this.previousDragX;\r\n  // apply selection\r\n  // TODO refactor this, selecting here feels weird\r\n  // HACK, set flag so dragging stays in correct direction\r\n  this.isDragSelect = this.options.wrapAround;\r\n  this.select( index );\r\n  delete this.isDragSelect;\r\n  this.dispatchEvent( 'dragEnd', event, [ pointer ] );\r\n};\r\n\r\nproto.dragEndRestingSelect = function() {\r\n  var restingX = this.getRestingPosition();\r\n  // how far away from selected slide\r\n  var distance = Math.abs( this.getSlideDistance( -restingX, this.selectedIndex ) );\r\n  // get closet resting going up and going down\r\n  var positiveResting = this._getClosestResting( restingX, distance, 1 );\r\n  var negativeResting = this._getClosestResting( restingX, distance, -1 );\r\n  // use closer resting for wrap-around\r\n  var index = positiveResting.distance < negativeResting.distance ?\r\n    positiveResting.index : negativeResting.index;\r\n  return index;\r\n};\r\n\r\n/**\r\n * given resting X and distance to selected cell\r\n * get the distance and index of the closest cell\r\n * @param {Number} restingX - estimated post-flick resting position\r\n * @param {Number} distance - distance to selected cell\r\n * @param {Integer} increment - +1 or -1, going up or down\r\n * @returns {Object} - { distance: {Number}, index: {Integer} }\r\n */\r\nproto._getClosestResting = function( restingX, distance, increment ) {\r\n  var index = this.selectedIndex;\r\n  var minDistance = Infinity;\r\n  var condition = this.options.contain && !this.options.wrapAround ?\r\n    // if contain, keep going if distance is equal to minDistance\r\n    function( d, md ) { return d <= md; } : function( d, md ) { return d < md; };\r\n  while ( condition( distance, minDistance ) ) {\r\n    // measure distance to next cell\r\n    index += increment;\r\n    minDistance = distance;\r\n    distance = this.getSlideDistance( -restingX, index );\r\n    if ( distance === null ) {\r\n      break;\r\n    }\r\n    distance = Math.abs( distance );\r\n  }\r\n  return {\r\n    distance: minDistance,\r\n    // selected was previous index\r\n    index: index - increment\r\n  };\r\n};\r\n\r\n/**\r\n * measure distance between x and a slide target\r\n * @param {Number} x\r\n * @param {Integer} index - slide index\r\n */\r\nproto.getSlideDistance = function( x, index ) {\r\n  var len = this.slides.length;\r\n  // wrap around if at least 2 slides\r\n  var isWrapAround = this.options.wrapAround && len > 1;\r\n  var slideIndex = isWrapAround ? utils.modulo( index, len ) : index;\r\n  var slide = this.slides[ slideIndex ];\r\n  if ( !slide ) {\r\n    return null;\r\n  }\r\n  // add distance for wrap-around slides\r\n  var wrap = isWrapAround ? this.slideableWidth * Math.floor( index / len ) : 0;\r\n  return x - ( slide.target + wrap );\r\n};\r\n\r\nproto.dragEndBoostSelect = function() {\r\n  // do not boost if no previousDragX or dragMoveTime\r\n  if ( this.previousDragX === undefined || !this.dragMoveTime ||\r\n    // or if drag was held for 100 ms\r\n    new Date() - this.dragMoveTime > 100 ) {\r\n    return 0;\r\n  }\r\n\r\n  var distance = this.getSlideDistance( -this.dragX, this.selectedIndex );\r\n  var delta = this.previousDragX - this.dragX;\r\n  if ( distance > 0 && delta > 0 ) {\r\n    // boost to next if moving towards the right, and positive velocity\r\n    return 1;\r\n  } else if ( distance < 0 && delta < 0 ) {\r\n    // boost to previous if moving towards the left, and negative velocity\r\n    return -1;\r\n  }\r\n  return 0;\r\n};\r\n\r\n// ----- staticClick ----- //\r\n\r\nproto.staticClick = function( event, pointer ) {\r\n  // get clickedCell, if cell was clicked\r\n  var clickedCell = this.getParentCell( event.target );\r\n  var cellElem = clickedCell && clickedCell.element;\r\n  var cellIndex = clickedCell && this.cells.indexOf( clickedCell );\r\n  this.dispatchEvent( 'staticClick', event, [ pointer, cellElem, cellIndex ] );\r\n};\r\n\r\n// ----- scroll ----- //\r\n\r\nproto.onscroll = function() {\r\n  var scroll = getScrollPosition();\r\n  var scrollMoveX = this.pointerDownScroll.x - scroll.x;\r\n  var scrollMoveY = this.pointerDownScroll.y - scroll.y;\r\n  // cancel click/tap if scroll is too much\r\n  if ( Math.abs( scrollMoveX ) > 3 || Math.abs( scrollMoveY ) > 3 ) {\r\n    this._pointerDone();\r\n  }\r\n};\r\n\r\n// ----- utils ----- //\r\n\r\nfunction getScrollPosition() {\r\n  return {\r\n    x: window.pageXOffset,\r\n    y: window.pageYOffset\r\n  };\r\n}\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// prev/next buttons\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/prev-next-button',[\r\n      './flickity',\r\n      'unipointer/unipointer',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, Unipointer, utils ) {\r\n      return factory( window, Flickity, Unipointer, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('unipointer'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.Unipointer,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, Unipointer, utils ) {\r\n'use strict';\r\n\r\nvar svgURI = 'http://www.w3.org/2000/svg';\r\n\r\n// -------------------------- PrevNextButton -------------------------- //\r\n\r\nfunction PrevNextButton( direction, parent ) {\r\n  this.direction = direction;\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPrevNextButton.prototype = Object.create( Unipointer.prototype );\r\n\r\nPrevNextButton.prototype._create = function() {\r\n  // properties\r\n  this.isEnabled = true;\r\n  this.isPrevious = this.direction == -1;\r\n  var leftDirection = this.parent.options.rightToLeft ? 1 : -1;\r\n  this.isLeft = this.direction == leftDirection;\r\n\r\n  var element = this.element = document.createElement('button');\r\n  element.className = 'flickity-button flickity-prev-next-button';\r\n  element.className += this.isPrevious ? ' previous' : ' next';\r\n  // prevent button from submitting form http://stackoverflow.com/a/10836076/182183\r\n  element.setAttribute( 'type', 'button' );\r\n  // init as disabled\r\n  this.disable();\r\n\r\n  element.setAttribute( 'aria-label', this.isPrevious ? 'Previous' : 'Next' );\r\n\r\n  // create arrow\r\n  var svg = this.createSVG();\r\n  element.appendChild( svg );\r\n  // events\r\n  this.parent.on( 'select', this.update.bind( this ) );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPrevNextButton.prototype.activate = function() {\r\n  this.bindStartEvent( this.element );\r\n  this.element.addEventListener( 'click', this );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.element );\r\n};\r\n\r\nPrevNextButton.prototype.deactivate = function() {\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.element );\r\n  // click events\r\n  this.unbindStartEvent( this.element );\r\n  this.element.removeEventListener( 'click', this );\r\n};\r\n\r\nPrevNextButton.prototype.createSVG = function() {\r\n  var svg = document.createElementNS( svgURI, 'svg');\r\n  svg.setAttribute( 'class', 'flickity-button-icon' );\r\n  svg.setAttribute( 'viewBox', '0 0 100 100' );\r\n  var path = document.createElementNS( svgURI, 'path');\r\n  var pathMovements = getArrowMovements( this.parent.options.arrowShape );\r\n  path.setAttribute( 'd', pathMovements );\r\n  path.setAttribute( 'class', 'arrow' );\r\n  // rotate arrow\r\n  if ( !this.isLeft ) {\r\n    path.setAttribute( 'transform', 'translate(100, 100) rotate(180) ' );\r\n  }\r\n  svg.appendChild( path );\r\n  return svg;\r\n};\r\n\r\n// get SVG path movmement\r\nfunction getArrowMovements( shape ) {\r\n  // use shape as movement if string\r\n  if ( typeof shape == 'string' ) {\r\n    return shape;\r\n  }\r\n  // create movement string\r\n  return 'M ' + shape.x0 + ',50' +\r\n    ' L ' + shape.x1 + ',' + ( shape.y1 + 50 ) +\r\n    ' L ' + shape.x2 + ',' + ( shape.y2 + 50 ) +\r\n    ' L ' + shape.x3 + ',50 ' +\r\n    ' L ' + shape.x2 + ',' + ( 50 - shape.y2 ) +\r\n    ' L ' + shape.x1 + ',' + ( 50 - shape.y1 ) +\r\n    ' Z';\r\n}\r\n\r\nPrevNextButton.prototype.handleEvent = utils.handleEvent;\r\n\r\nPrevNextButton.prototype.onclick = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.parent.uiChange();\r\n  var method = this.isPrevious ? 'previous' : 'next';\r\n  this.parent[ method ]();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nPrevNextButton.prototype.enable = function() {\r\n  if ( this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = false;\r\n  this.isEnabled = true;\r\n};\r\n\r\nPrevNextButton.prototype.disable = function() {\r\n  if ( !this.isEnabled ) {\r\n    return;\r\n  }\r\n  this.element.disabled = true;\r\n  this.isEnabled = false;\r\n};\r\n\r\nPrevNextButton.prototype.update = function() {\r\n  // index of first or last slide, if previous or next\r\n  var slides = this.parent.slides;\r\n  // enable is wrapAround and at least 2 slides\r\n  if ( this.parent.options.wrapAround && slides.length > 1 ) {\r\n    this.enable();\r\n    return;\r\n  }\r\n  var lastIndex = slides.length ? slides.length - 1 : 0;\r\n  var boundIndex = this.isPrevious ? 0 : lastIndex;\r\n  var method = this.parent.selectedIndex == boundIndex ? 'disable' : 'enable';\r\n  this[ method ]();\r\n};\r\n\r\nPrevNextButton.prototype.destroy = function() {\r\n  this.deactivate();\r\n  this.allOff();\r\n};\r\n\r\n// -------------------------- Flickity prototype -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  prevNextButtons: true,\r\n  arrowShape: {\r\n    x0: 10,\r\n    x1: 60, y1: 50,\r\n    x2: 70, y2: 40,\r\n    x3: 30\r\n  }\r\n});\r\n\r\nFlickity.createMethods.push('_createPrevNextButtons');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPrevNextButtons = function() {\r\n  if ( !this.options.prevNextButtons ) {\r\n    return;\r\n  }\r\n\r\n  this.prevButton = new PrevNextButton( -1, this );\r\n  this.nextButton = new PrevNextButton( 1, this );\r\n\r\n  this.on( 'activate', this.activatePrevNextButtons );\r\n};\r\n\r\nproto.activatePrevNextButtons = function() {\r\n  this.prevButton.activate();\r\n  this.nextButton.activate();\r\n  this.on( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\nproto.deactivatePrevNextButtons = function() {\r\n  this.prevButton.deactivate();\r\n  this.nextButton.deactivate();\r\n  this.off( 'deactivate', this.deactivatePrevNextButtons );\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nFlickity.PrevNextButton = PrevNextButton;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// page dots\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/page-dots',[\r\n      './flickity',\r\n      'unipointer/unipointer',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, Unipointer, utils ) {\r\n      return factory( window, Flickity, Unipointer, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('unipointer'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.Unipointer,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, Unipointer, utils ) {\r\n\r\n// -------------------------- PageDots -------------------------- //\r\n\r\n\r\n\r\nfunction PageDots( parent ) {\r\n  this.parent = parent;\r\n  this._create();\r\n}\r\n\r\nPageDots.prototype = Object.create( Unipointer.prototype );\r\n\r\nPageDots.prototype._create = function() {\r\n  // create holder element\r\n  this.holder = document.createElement('ol');\r\n  this.holder.className = 'flickity-page-dots';\r\n  // create dots, array of elements\r\n  this.dots = [];\r\n  // events\r\n  this.handleClick = this.onClick.bind( this );\r\n  this.on( 'pointerDown', this.parent.childUIPointerDown.bind( this.parent ) );\r\n};\r\n\r\nPageDots.prototype.activate = function() {\r\n  this.setDots();\r\n  this.holder.addEventListener( 'click', this.handleClick );\r\n  this.bindStartEvent( this.holder );\r\n  // add to DOM\r\n  this.parent.element.appendChild( this.holder );\r\n};\r\n\r\nPageDots.prototype.deactivate = function() {\r\n  this.holder.removeEventListener( 'click', this.handleClick );\r\n  this.unbindStartEvent( this.holder );\r\n  // remove from DOM\r\n  this.parent.element.removeChild( this.holder );\r\n};\r\n\r\nPageDots.prototype.setDots = function() {\r\n  // get difference between number of slides and number of dots\r\n  var delta = this.parent.slides.length - this.dots.length;\r\n  if ( delta > 0 ) {\r\n    this.addDots( delta );\r\n  } else if ( delta < 0 ) {\r\n    this.removeDots( -delta );\r\n  }\r\n};\r\n\r\nPageDots.prototype.addDots = function( count ) {\r\n  var fragment = document.createDocumentFragment();\r\n  var newDots = [];\r\n  var length = this.dots.length;\r\n  var max = length + count;\r\n\r\n  for ( var i = length; i < max; i++ ) {\r\n    var dot = document.createElement('li');\r\n    dot.className = 'dot';\r\n    dot.setAttribute( 'aria-label', 'Page dot ' + ( i + 1 ) );\r\n    fragment.appendChild( dot );\r\n    newDots.push( dot );\r\n  }\r\n\r\n  this.holder.appendChild( fragment );\r\n  this.dots = this.dots.concat( newDots );\r\n};\r\n\r\nPageDots.prototype.removeDots = function( count ) {\r\n  // remove from this.dots collection\r\n  var removeDots = this.dots.splice( this.dots.length - count, count );\r\n  // remove from DOM\r\n  removeDots.forEach( function( dot ) {\r\n    this.holder.removeChild( dot );\r\n  }, this );\r\n};\r\n\r\nPageDots.prototype.updateSelected = function() {\r\n  // remove selected class on previous\r\n  if ( this.selectedDot ) {\r\n    this.selectedDot.className = 'dot';\r\n    this.selectedDot.removeAttribute('aria-current');\r\n  }\r\n  // don't proceed if no dots\r\n  if ( !this.dots.length ) {\r\n    return;\r\n  }\r\n  this.selectedDot = this.dots[ this.parent.selectedIndex ];\r\n  this.selectedDot.className = 'dot is-selected';\r\n  this.selectedDot.setAttribute( 'aria-current', 'step' );\r\n};\r\n\r\nPageDots.prototype.onTap = // old method name, backwards-compatible\r\nPageDots.prototype.onClick = function( event ) {\r\n  var target = event.target;\r\n  // only care about dot clicks\r\n  if ( target.nodeName != 'LI' ) {\r\n    return;\r\n  }\r\n\r\n  this.parent.uiChange();\r\n  var index = this.dots.indexOf( target );\r\n  this.parent.select( index );\r\n};\r\n\r\nPageDots.prototype.destroy = function() {\r\n  this.deactivate();\r\n  this.allOff();\r\n};\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pageDots: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPageDots');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPageDots = function() {\r\n  if ( !this.options.pageDots ) {\r\n    return;\r\n  }\r\n  this.pageDots = new PageDots( this );\r\n  // events\r\n  this.on( 'activate', this.activatePageDots );\r\n  this.on( 'select', this.updateSelectedPageDots );\r\n  this.on( 'cellChange', this.updatePageDots );\r\n  this.on( 'resize', this.updatePageDots );\r\n  this.on( 'deactivate', this.deactivatePageDots );\r\n};\r\n\r\nproto.activatePageDots = function() {\r\n  this.pageDots.activate();\r\n};\r\n\r\nproto.updateSelectedPageDots = function() {\r\n  this.pageDots.updateSelected();\r\n};\r\n\r\nproto.updatePageDots = function() {\r\n  this.pageDots.setDots();\r\n};\r\n\r\nproto.deactivatePageDots = function() {\r\n  this.pageDots.deactivate();\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.PageDots = PageDots;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// player & autoPlay\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/player',[\r\n      'ev-emitter/ev-emitter',\r\n      'fizzy-ui-utils/utils',\r\n      './flickity'\r\n    ], function( EvEmitter, utils, Flickity ) {\r\n      return factory( EvEmitter, utils, Flickity );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('ev-emitter'),\r\n      require('fizzy-ui-utils'),\r\n      require('./flickity')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window.EvEmitter,\r\n      window.fizzyUIUtils,\r\n      window.Flickity\r\n    );\r\n  }\r\n\r\n}( window, function factory( EvEmitter, utils, Flickity ) {\r\n\r\n\r\n\r\n// -------------------------- Player -------------------------- //\r\n\r\nfunction Player( parent ) {\r\n  this.parent = parent;\r\n  this.state = 'stopped';\r\n  // visibility change event handler\r\n  this.onVisibilityChange = this.visibilityChange.bind( this );\r\n  this.onVisibilityPlay = this.visibilityPlay.bind( this );\r\n}\r\n\r\nPlayer.prototype = Object.create( EvEmitter.prototype );\r\n\r\n// start play\r\nPlayer.prototype.play = function() {\r\n  if ( this.state == 'playing' ) {\r\n    return;\r\n  }\r\n  // do not play if page is hidden, start playing when page is visible\r\n  var isPageHidden = document.hidden;\r\n  if ( isPageHidden ) {\r\n    document.addEventListener( 'visibilitychange', this.onVisibilityPlay );\r\n    return;\r\n  }\r\n\r\n  this.state = 'playing';\r\n  // listen to visibility change\r\n  document.addEventListener( 'visibilitychange', this.onVisibilityChange );\r\n  // start ticking\r\n  this.tick();\r\n};\r\n\r\nPlayer.prototype.tick = function() {\r\n  // do not tick if not playing\r\n  if ( this.state != 'playing' ) {\r\n    return;\r\n  }\r\n\r\n  var time = this.parent.options.autoPlay;\r\n  // default to 3 seconds\r\n  time = typeof time == 'number' ? time : 3000;\r\n  var _this = this;\r\n  // HACK: reset ticks if stopped and started within interval\r\n  this.clear();\r\n  this.timeout = setTimeout( function() {\r\n    _this.parent.next( true );\r\n    _this.tick();\r\n  }, time );\r\n};\r\n\r\nPlayer.prototype.stop = function() {\r\n  this.state = 'stopped';\r\n  this.clear();\r\n  // remove visibility change event\r\n  document.removeEventListener( 'visibilitychange', this.onVisibilityChange );\r\n};\r\n\r\nPlayer.prototype.clear = function() {\r\n  clearTimeout( this.timeout );\r\n};\r\n\r\nPlayer.prototype.pause = function() {\r\n  if ( this.state == 'playing' ) {\r\n    this.state = 'paused';\r\n    this.clear();\r\n  }\r\n};\r\n\r\nPlayer.prototype.unpause = function() {\r\n  // re-start play if paused\r\n  if ( this.state == 'paused' ) {\r\n    this.play();\r\n  }\r\n};\r\n\r\n// pause if page visibility is hidden, unpause if visible\r\nPlayer.prototype.visibilityChange = function() {\r\n  var isPageHidden = document.hidden;\r\n  this[ isPageHidden ? 'pause' : 'unpause' ]();\r\n};\r\n\r\nPlayer.prototype.visibilityPlay = function() {\r\n  this.play();\r\n  document.removeEventListener( 'visibilitychange', this.onVisibilityPlay );\r\n};\r\n\r\n// -------------------------- Flickity -------------------------- //\r\n\r\nutils.extend( Flickity.defaults, {\r\n  pauseAutoPlayOnHover: true\r\n});\r\n\r\nFlickity.createMethods.push('_createPlayer');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createPlayer = function() {\r\n  this.player = new Player( this );\r\n\r\n  this.on( 'activate', this.activatePlayer );\r\n  this.on( 'uiChange', this.stopPlayer );\r\n  this.on( 'pointerDown', this.stopPlayer );\r\n  this.on( 'deactivate', this.deactivatePlayer );\r\n};\r\n\r\nproto.activatePlayer = function() {\r\n  if ( !this.options.autoPlay ) {\r\n    return;\r\n  }\r\n  this.player.play();\r\n  this.element.addEventListener( 'mouseenter', this );\r\n};\r\n\r\n// Player API, don't hate the ... thanks I know where the door is\r\n\r\nproto.playPlayer = function() {\r\n  this.player.play();\r\n};\r\n\r\nproto.stopPlayer = function() {\r\n  this.player.stop();\r\n};\r\n\r\nproto.pausePlayer = function() {\r\n  this.player.pause();\r\n};\r\n\r\nproto.unpausePlayer = function() {\r\n  this.player.unpause();\r\n};\r\n\r\nproto.deactivatePlayer = function() {\r\n  this.player.stop();\r\n  this.element.removeEventListener( 'mouseenter', this );\r\n};\r\n\r\n// ----- mouseenter/leave ----- //\r\n\r\n// pause auto-play on hover\r\nproto.onmouseenter = function() {\r\n  if ( !this.options.pauseAutoPlayOnHover ) {\r\n    return;\r\n  }\r\n  this.player.pause();\r\n  this.element.addEventListener( 'mouseleave', this );\r\n};\r\n\r\n// resume auto-play on hover off\r\nproto.onmouseleave = function() {\r\n  this.player.unpause();\r\n  this.element.removeEventListener( 'mouseleave', this );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.Player = Player;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// add, remove cell\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/add-remove-cell',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n\r\n\r\n\r\n// append cells to a document fragment\r\nfunction getCellsFragment( cells ) {\r\n  var fragment = document.createDocumentFragment();\r\n  cells.forEach( function( cell ) {\r\n    fragment.appendChild( cell.element );\r\n  });\r\n  return fragment;\r\n}\r\n\r\n// -------------------------- add/remove cell prototype -------------------------- //\r\n\r\nvar proto = Flickity.prototype;\r\n\r\n/**\r\n * Insert, prepend, or append cells\r\n * @param {Element, Array, NodeList} elems\r\n * @param {Integer} index\r\n */\r\nproto.insert = function( elems, index ) {\r\n  var cells = this._makeCells( elems );\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n  var len = this.cells.length;\r\n  // default to append\r\n  index = index === undefined ? len : index;\r\n  // add cells with document fragment\r\n  var fragment = getCellsFragment( cells );\r\n  // append to slider\r\n  var isAppend = index == len;\r\n  if ( isAppend ) {\r\n    this.slider.appendChild( fragment );\r\n  } else {\r\n    var insertCellElement = this.cells[ index ].element;\r\n    this.slider.insertBefore( fragment, insertCellElement );\r\n  }\r\n  // add to this.cells\r\n  if ( index === 0 ) {\r\n    // prepend, add to start\r\n    this.cells = cells.concat( this.cells );\r\n  } else if ( isAppend ) {\r\n    // append, add to end\r\n    this.cells = this.cells.concat( cells );\r\n  } else {\r\n    // insert in this.cells\r\n    var endCells = this.cells.splice( index, len - index );\r\n    this.cells = this.cells.concat( cells ).concat( endCells );\r\n  }\r\n\r\n  this._sizeCells( cells );\r\n  this.cellChange( index, true );\r\n};\r\n\r\nproto.append = function( elems ) {\r\n  this.insert( elems, this.cells.length );\r\n};\r\n\r\nproto.prepend = function( elems ) {\r\n  this.insert( elems, 0 );\r\n};\r\n\r\n/**\r\n * Remove cells\r\n * @param {Element, Array, NodeList} elems\r\n */\r\nproto.remove = function( elems ) {\r\n  var cells = this.getCells( elems );\r\n  if ( !cells || !cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var minCellIndex = this.cells.length - 1;\r\n  // remove cells from collection & DOM\r\n  cells.forEach( function( cell ) {\r\n    cell.remove();\r\n    var index = this.cells.indexOf( cell );\r\n    minCellIndex = Math.min( index, minCellIndex );\r\n    utils.removeFrom( this.cells, cell );\r\n  }, this );\r\n\r\n  this.cellChange( minCellIndex, true );\r\n};\r\n\r\n/**\r\n * logic to be run after a cell's size changes\r\n * @param {Element} elem - cell's element\r\n */\r\nproto.cellSizeChange = function( elem ) {\r\n  var cell = this.getCell( elem );\r\n  if ( !cell ) {\r\n    return;\r\n  }\r\n  cell.getSize();\r\n\r\n  var index = this.cells.indexOf( cell );\r\n  this.cellChange( index );\r\n};\r\n\r\n/**\r\n * logic any time a cell is changed: added, removed, or size changed\r\n * @param {Integer} changedCellIndex - index of the changed cell, optional\r\n */\r\nproto.cellChange = function( changedCellIndex, isPositioningSlider ) {\r\n  var prevSelectedElem = this.selectedElement;\r\n  this._positionCells( changedCellIndex );\r\n  this._getWrapShiftCells();\r\n  this.setGallerySize();\r\n  // update selectedIndex\r\n  // try to maintain position & select previous selected element\r\n  var cell = this.getCell( prevSelectedElem );\r\n  if ( cell ) {\r\n    this.selectedIndex = this.getCellSlideIndex( cell );\r\n  }\r\n  this.selectedIndex = Math.min( this.slides.length - 1, this.selectedIndex );\r\n\r\n  this.emitEvent( 'cellChange', [ changedCellIndex ] );\r\n  // position slider\r\n  this.select( this.selectedIndex );\r\n  // do not position slider after lazy load\r\n  if ( isPositioningSlider ) {\r\n    this.positionSliderAtSelected();\r\n  }\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n// lazyload\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/lazyload',[\r\n      './flickity',\r\n      'fizzy-ui-utils/utils'\r\n    ], function( Flickity, utils ) {\r\n      return factory( window, Flickity, utils );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('./flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window,\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, utils ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createLazyload');\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createLazyload = function() {\r\n  this.on( 'select', this.lazyLoad );\r\n};\r\n\r\nproto.lazyLoad = function() {\r\n  var lazyLoad = this.options.lazyLoad;\r\n  if ( !lazyLoad ) {\r\n    return;\r\n  }\r\n  // get adjacent cells, use lazyLoad option for adjacent count\r\n  var adjCount = typeof lazyLoad == 'number' ? lazyLoad : 0;\r\n  var cellElems = this.getAdjacentCellElements( adjCount );\r\n  // get lazy images in those cells\r\n  var lazyImages = [];\r\n  cellElems.forEach( function( cellElem ) {\r\n    var lazyCellImages = getCellLazyImages( cellElem );\r\n    lazyImages = lazyImages.concat( lazyCellImages );\r\n  });\r\n  // load lazy images\r\n  lazyImages.forEach( function( img ) {\r\n    new LazyLoader( img, this );\r\n  }, this );\r\n};\r\n\r\nfunction getCellLazyImages( cellElem ) {\r\n  // check if cell element is lazy image\r\n  if ( cellElem.nodeName == 'IMG' ) {\r\n    var lazyloadAttr = cellElem.getAttribute('data-flickity-lazyload');\r\n    var srcAttr = cellElem.getAttribute('data-flickity-lazyload-src');\r\n    var srcsetAttr = cellElem.getAttribute('data-flickity-lazyload-srcset');\r\n    if ( lazyloadAttr || srcAttr || srcsetAttr ) {\r\n      return [ cellElem ];\r\n    }\r\n  }\r\n  // select lazy images in cell\r\n  var lazySelector = 'img[data-flickity-lazyload], ' +\r\n    'img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]';\r\n  var imgs = cellElem.querySelectorAll( lazySelector );\r\n  return utils.makeArray( imgs );\r\n}\r\n\r\n// -------------------------- LazyLoader -------------------------- //\r\n\r\n/**\r\n * class to handle loading images\r\n */\r\nfunction LazyLoader( img, flickity ) {\r\n  this.img = img;\r\n  this.flickity = flickity;\r\n  this.load();\r\n}\r\n\r\nLazyLoader.prototype.handleEvent = utils.handleEvent;\r\n\r\nLazyLoader.prototype.load = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  // get src & srcset\r\n  var src = this.img.getAttribute('data-flickity-lazyload') ||\r\n    this.img.getAttribute('data-flickity-lazyload-src');\r\n  var srcset = this.img.getAttribute('data-flickity-lazyload-srcset');\r\n  // set src & serset\r\n  this.img.src = src;\r\n  if ( srcset ) {\r\n    this.img.setAttribute( 'srcset', srcset );\r\n  }\r\n  // remove attr\r\n  this.img.removeAttribute('data-flickity-lazyload');\r\n  this.img.removeAttribute('data-flickity-lazyload-src');\r\n  this.img.removeAttribute('data-flickity-lazyload-srcset');\r\n};\r\n\r\nLazyLoader.prototype.onload = function( event ) {\r\n  this.complete( event, 'flickity-lazyloaded' );\r\n};\r\n\r\nLazyLoader.prototype.onerror = function( event ) {\r\n  this.complete( event, 'flickity-lazyerror' );\r\n};\r\n\r\nLazyLoader.prototype.complete = function( event, className ) {\r\n  // unbind events\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n\r\n  var cell = this.flickity.getParentCell( this.img );\r\n  var cellElem = cell && cell.element;\r\n  this.flickity.cellSizeChange( cellElem );\r\n\r\n  this.img.classList.add( className );\r\n  this.flickity.dispatchEvent( 'lazyLoad', event, cellElem );\r\n};\r\n\r\n// -----  ----- //\r\n\r\nFlickity.LazyLoader = LazyLoader;\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * Flickity v2.2.0\r\n * Touch, responsive, flickable carousels\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Flickity Commercial License for commercial use\r\n *\r\n * https://flickity.metafizzy.co\r\n * Copyright 2015-2018 Metafizzy\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity/js/index',[\r\n      './flickity',\r\n      './drag',\r\n      './prev-next-button',\r\n      './page-dots',\r\n      './player',\r\n      './add-remove-cell',\r\n      './lazyload'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('./flickity'),\r\n      require('./drag'),\r\n      require('./prev-next-button'),\r\n      require('./page-dots'),\r\n      require('./player'),\r\n      require('./add-remove-cell'),\r\n      require('./lazyload')\r\n    );\r\n  }\r\n\r\n})( window, function factory( Flickity ) {\r\n  /*jshint strict: false*/\r\n  return Flickity;\r\n});\r\n\r\n/*!\r\n * Flickity asNavFor v2.0.1\r\n * enable asNavFor for Flickity\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true*/\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'flickity-as-nav-for/as-nav-for',[\r\n      'flickity/js/index',\r\n      'fizzy-ui-utils/utils'\r\n    ], factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('flickity'),\r\n      require('fizzy-ui-utils')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window.Flickity,\r\n      window.fizzyUIUtils\r\n    );\r\n  }\r\n\r\n}( window, function factory( Flickity, utils ) {\r\n\r\n\r\n\r\n// -------------------------- asNavFor prototype -------------------------- //\r\n\r\n// Flickity.defaults.asNavFor = null;\r\n\r\nFlickity.createMethods.push('_createAsNavFor');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createAsNavFor = function() {\r\n  this.on( 'activate', this.activateAsNavFor );\r\n  this.on( 'deactivate', this.deactivateAsNavFor );\r\n  this.on( 'destroy', this.destroyAsNavFor );\r\n\r\n  var asNavForOption = this.options.asNavFor;\r\n  if ( !asNavForOption ) {\r\n    return;\r\n  }\r\n  // HACK do async, give time for other flickity to be initalized\r\n  var _this = this;\r\n  setTimeout( function initNavCompanion() {\r\n    _this.setNavCompanion( asNavForOption );\r\n  });\r\n};\r\n\r\nproto.setNavCompanion = function( elem ) {\r\n  elem = utils.getQueryElement( elem );\r\n  var companion = Flickity.data( elem );\r\n  // stop if no companion or companion is self\r\n  if ( !companion || companion == this ) {\r\n    return;\r\n  }\r\n\r\n  this.navCompanion = companion;\r\n  // companion select\r\n  var _this = this;\r\n  this.onNavCompanionSelect = function() {\r\n    _this.navCompanionSelect();\r\n  };\r\n  companion.on( 'select', this.onNavCompanionSelect );\r\n  // click\r\n  this.on( 'staticClick', this.onNavStaticClick );\r\n\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.navCompanionSelect = function( isInstant ) {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  // select slide that matches first cell of slide\r\n  var selectedCell = this.navCompanion.selectedCells[0];\r\n  var firstIndex = this.navCompanion.cells.indexOf( selectedCell );\r\n  var lastIndex = firstIndex + this.navCompanion.selectedCells.length - 1;\r\n  var selectIndex = Math.floor( lerp( firstIndex, lastIndex,\r\n    this.navCompanion.cellAlign ) );\r\n  this.selectCell( selectIndex, false, isInstant );\r\n  // set nav selected class\r\n  this.removeNavSelectedElements();\r\n  // stop if companion has more cells than this one\r\n  if ( selectIndex >= this.cells.length ) {\r\n    return;\r\n  }\r\n\r\n  var selectedCells = this.cells.slice( firstIndex, lastIndex + 1 );\r\n  this.navSelectedElements = selectedCells.map( function( cell ) {\r\n    return cell.element;\r\n  });\r\n  this.changeNavSelectedClass('add');\r\n};\r\n\r\nfunction lerp( a, b, t ) {\r\n  return ( b - a ) * t + a;\r\n}\r\n\r\nproto.changeNavSelectedClass = function( method ) {\r\n  this.navSelectedElements.forEach( function( navElem ) {\r\n    navElem.classList[ method ]('is-nav-selected');\r\n  });\r\n};\r\n\r\nproto.activateAsNavFor = function() {\r\n  this.navCompanionSelect( true );\r\n};\r\n\r\nproto.removeNavSelectedElements = function() {\r\n  if ( !this.navSelectedElements ) {\r\n    return;\r\n  }\r\n  this.changeNavSelectedClass('remove');\r\n  delete this.navSelectedElements;\r\n};\r\n\r\nproto.onNavStaticClick = function( event, pointer, cellElement, cellIndex ) {\r\n  if ( typeof cellIndex == 'number' ) {\r\n    this.navCompanion.selectCell( cellIndex );\r\n  }\r\n};\r\n\r\nproto.deactivateAsNavFor = function() {\r\n  this.removeNavSelectedElements();\r\n};\r\n\r\nproto.destroyAsNavFor = function() {\r\n  if ( !this.navCompanion ) {\r\n    return;\r\n  }\r\n  this.navCompanion.off( 'select', this.onNavCompanionSelect );\r\n  this.off( 'staticClick', this.onNavStaticClick );\r\n  delete this.navCompanion;\r\n};\r\n\r\n// -----  ----- //\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n/*!\r\n * imagesLoaded v4.1.4\r\n * JavaScript is all like \"You images are done yet or what?\"\r\n * MIT License\r\n */\r\n\r\n( function( window, factory ) { 'use strict';\r\n  // universal module definition\r\n\r\n  /*global define: false, module: false, require: false */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'imagesloaded/imagesloaded',[\r\n      'ev-emitter/ev-emitter'\r\n    ], function( EvEmitter ) {\r\n      return factory( window, EvEmitter );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.imagesLoaded = factory(\r\n      window,\r\n      window.EvEmitter\r\n    );\r\n  }\r\n\r\n})( typeof window !== 'undefined' ? window : this,\r\n\r\n// --------------------------  factory -------------------------- //\r\n\r\nfunction factory( window, EvEmitter ) {\r\n\r\n\r\n\r\nvar $ = window.jQuery;\r\nvar console = window.console;\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// extend objects\r\nfunction extend( a, b ) {\r\n  for ( var prop in b ) {\r\n    a[ prop ] = b[ prop ];\r\n  }\r\n  return a;\r\n}\r\n\r\nvar arraySlice = Array.prototype.slice;\r\n\r\n// turn element or nodeList into an array\r\nfunction makeArray( obj ) {\r\n  if ( Array.isArray( obj ) ) {\r\n    // use object if already an array\r\n    return obj;\r\n  }\r\n\r\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\r\n  if ( isArrayLike ) {\r\n    // convert nodeList to array\r\n    return arraySlice.call( obj );\r\n  }\r\n\r\n  // array of single index\r\n  return [ obj ];\r\n}\r\n\r\n// -------------------------- imagesLoaded -------------------------- //\r\n\r\n/**\r\n * @param {Array, Element, NodeList, String} elem\r\n * @param {Object or Function} options - if function, use as callback\r\n * @param {Function} onAlways - callback function\r\n */\r\nfunction ImagesLoaded( elem, options, onAlways ) {\r\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\r\n  if ( !( this instanceof ImagesLoaded ) ) {\r\n    return new ImagesLoaded( elem, options, onAlways );\r\n  }\r\n  // use elem as selector string\r\n  var queryElem = elem;\r\n  if ( typeof elem == 'string' ) {\r\n    queryElem = document.querySelectorAll( elem );\r\n  }\r\n  // bail if bad element\r\n  if ( !queryElem ) {\r\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\r\n    return;\r\n  }\r\n\r\n  this.elements = makeArray( queryElem );\r\n  this.options = extend( {}, this.options );\r\n  // shift arguments if no options set\r\n  if ( typeof options == 'function' ) {\r\n    onAlways = options;\r\n  } else {\r\n    extend( this.options, options );\r\n  }\r\n\r\n  if ( onAlways ) {\r\n    this.on( 'always', onAlways );\r\n  }\r\n\r\n  this.getImages();\r\n\r\n  if ( $ ) {\r\n    // add jQuery Deferred object\r\n    this.jqDeferred = new $.Deferred();\r\n  }\r\n\r\n  // HACK check async to allow time to bind listeners\r\n  setTimeout( this.check.bind( this ) );\r\n}\r\n\r\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\r\n\r\nImagesLoaded.prototype.options = {};\r\n\r\nImagesLoaded.prototype.getImages = function() {\r\n  this.images = [];\r\n\r\n  // filter & find items if we have an item selector\r\n  this.elements.forEach( this.addElementImages, this );\r\n};\r\n\r\n/**\r\n * @param {Node} element\r\n */\r\nImagesLoaded.prototype.addElementImages = function( elem ) {\r\n  // filter siblings\r\n  if ( elem.nodeName == 'IMG' ) {\r\n    this.addImage( elem );\r\n  }\r\n  // get background image on element\r\n  if ( this.options.background === true ) {\r\n    this.addElementBackgroundImages( elem );\r\n  }\r\n\r\n  // find children\r\n  // no non-element nodes, #143\r\n  var nodeType = elem.nodeType;\r\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\r\n    return;\r\n  }\r\n  var childImgs = elem.querySelectorAll('img');\r\n  // concat childElems to filterFound array\r\n  for ( var i=0; i < childImgs.length; i++ ) {\r\n    var img = childImgs[i];\r\n    this.addImage( img );\r\n  }\r\n\r\n  // get child background images\r\n  if ( typeof this.options.background == 'string' ) {\r\n    var children = elem.querySelectorAll( this.options.background );\r\n    for ( i=0; i < children.length; i++ ) {\r\n      var child = children[i];\r\n      this.addElementBackgroundImages( child );\r\n    }\r\n  }\r\n};\r\n\r\nvar elementNodeTypes = {\r\n  1: true,\r\n  9: true,\r\n  11: true\r\n};\r\n\r\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\r\n  var style = getComputedStyle( elem );\r\n  if ( !style ) {\r\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\r\n    return;\r\n  }\r\n  // get url inside url(\"...\")\r\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\r\n  var matches = reURL.exec( style.backgroundImage );\r\n  while ( matches !== null ) {\r\n    var url = matches && matches[2];\r\n    if ( url ) {\r\n      this.addBackground( url, elem );\r\n    }\r\n    matches = reURL.exec( style.backgroundImage );\r\n  }\r\n};\r\n\r\n/**\r\n * @param {Image} img\r\n */\r\nImagesLoaded.prototype.addImage = function( img ) {\r\n  var loadingImage = new LoadingImage( img );\r\n  this.images.push( loadingImage );\r\n};\r\n\r\nImagesLoaded.prototype.addBackground = function( url, elem ) {\r\n  var background = new Background( url, elem );\r\n  this.images.push( background );\r\n};\r\n\r\nImagesLoaded.prototype.check = function() {\r\n  var _this = this;\r\n  this.progressedCount = 0;\r\n  this.hasAnyBroken = false;\r\n  // complete if no images\r\n  if ( !this.images.length ) {\r\n    this.complete();\r\n    return;\r\n  }\r\n\r\n  function onProgress( image, elem, message ) {\r\n    // HACK - Chrome triggers event before object properties have changed. #83\r\n    setTimeout( function() {\r\n      _this.progress( image, elem, message );\r\n    });\r\n  }\r\n\r\n  this.images.forEach( function( loadingImage ) {\r\n    loadingImage.once( 'progress', onProgress );\r\n    loadingImage.check();\r\n  });\r\n};\r\n\r\nImagesLoaded.prototype.progress = function( image, elem, message ) {\r\n  this.progressedCount++;\r\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\r\n  // progress event\r\n  this.emitEvent( 'progress', [ this, image, elem ] );\r\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\r\n    this.jqDeferred.notify( this, image );\r\n  }\r\n  // check if completed\r\n  if ( this.progressedCount == this.images.length ) {\r\n    this.complete();\r\n  }\r\n\r\n  if ( this.options.debug && console ) {\r\n    console.log( 'progress: ' + message, image, elem );\r\n  }\r\n};\r\n\r\nImagesLoaded.prototype.complete = function() {\r\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\r\n  this.isComplete = true;\r\n  this.emitEvent( eventName, [ this ] );\r\n  this.emitEvent( 'always', [ this ] );\r\n  if ( this.jqDeferred ) {\r\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\r\n    this.jqDeferred[ jqMethod ]( this );\r\n  }\r\n};\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nfunction LoadingImage( img ) {\r\n  this.img = img;\r\n}\r\n\r\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\r\n\r\nLoadingImage.prototype.check = function() {\r\n  // If complete is true and browser supports natural sizes,\r\n  // try to check for image status manually.\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    // report based on naturalWidth\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    return;\r\n  }\r\n\r\n  // If none of the checks above matched, simulate loading on detached element.\r\n  this.proxyImage = new Image();\r\n  this.proxyImage.addEventListener( 'load', this );\r\n  this.proxyImage.addEventListener( 'error', this );\r\n  // bind to image as well for Firefox. #191\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.proxyImage.src = this.img.src;\r\n};\r\n\r\nLoadingImage.prototype.getIsImageComplete = function() {\r\n  // check for non-zero, non-undefined naturalWidth\r\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\r\n  return this.img.complete && this.img.naturalWidth;\r\n};\r\n\r\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.img, message ] );\r\n};\r\n\r\n// ----- events ----- //\r\n\r\n// trigger specified handler for event type\r\nLoadingImage.prototype.handleEvent = function( event ) {\r\n  var method = 'on' + event.type;\r\n  if ( this[ method ] ) {\r\n    this[ method ]( event );\r\n  }\r\n};\r\n\r\nLoadingImage.prototype.onload = function() {\r\n  this.confirm( true, 'onload' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.onerror = function() {\r\n  this.confirm( false, 'onerror' );\r\n  this.unbindEvents();\r\n};\r\n\r\nLoadingImage.prototype.unbindEvents = function() {\r\n  this.proxyImage.removeEventListener( 'load', this );\r\n  this.proxyImage.removeEventListener( 'error', this );\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\n// -------------------------- Background -------------------------- //\r\n\r\nfunction Background( url, element ) {\r\n  this.url = url;\r\n  this.element = element;\r\n  this.img = new Image();\r\n}\r\n\r\n// inherit LoadingImage prototype\r\nBackground.prototype = Object.create( LoadingImage.prototype );\r\n\r\nBackground.prototype.check = function() {\r\n  this.img.addEventListener( 'load', this );\r\n  this.img.addEventListener( 'error', this );\r\n  this.img.src = this.url;\r\n  // check if image is already complete\r\n  var isComplete = this.getIsImageComplete();\r\n  if ( isComplete ) {\r\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\r\n    this.unbindEvents();\r\n  }\r\n};\r\n\r\nBackground.prototype.unbindEvents = function() {\r\n  this.img.removeEventListener( 'load', this );\r\n  this.img.removeEventListener( 'error', this );\r\n};\r\n\r\nBackground.prototype.confirm = function( isLoaded, message ) {\r\n  this.isLoaded = isLoaded;\r\n  this.emitEvent( 'progress', [ this, this.element, message ] );\r\n};\r\n\r\n// -------------------------- jQuery -------------------------- //\r\n\r\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\r\n  jQuery = jQuery || window.jQuery;\r\n  if ( !jQuery ) {\r\n    return;\r\n  }\r\n  // set local variable\r\n  $ = jQuery;\r\n  // $().imagesLoaded()\r\n  $.fn.imagesLoaded = function( options, callback ) {\r\n    var instance = new ImagesLoaded( this, options, callback );\r\n    return instance.jqDeferred.promise( $(this) );\r\n  };\r\n};\r\n// try making plugin\r\nImagesLoaded.makeJQueryPlugin();\r\n\r\n// --------------------------  -------------------------- //\r\n\r\nreturn ImagesLoaded;\r\n\r\n});\r\n\r\n/*!\r\n * Flickity imagesLoaded v2.0.0\r\n * enables imagesLoaded option for Flickity\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( [\r\n      'flickity/js/index',\r\n      'imagesloaded/imagesloaded'\r\n    ], function( Flickity, imagesLoaded ) {\r\n      return factory( window, Flickity, imagesLoaded );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('flickity'),\r\n      require('imagesloaded')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Flickity = factory(\r\n      window,\r\n      window.Flickity,\r\n      window.imagesLoaded\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Flickity, imagesLoaded ) {\r\n'use strict';\r\n\r\nFlickity.createMethods.push('_createImagesLoaded');\r\n\r\nvar proto = Flickity.prototype;\r\n\r\nproto._createImagesLoaded = function() {\r\n  this.on( 'activate', this.imagesLoaded );\r\n};\r\n\r\nproto.imagesLoaded = function() {\r\n  if ( !this.options.imagesLoaded ) {\r\n    return;\r\n  }\r\n  var _this = this;\r\n  function onImagesLoadedProgress( instance, image ) {\r\n    var cell = _this.getParentCell( image.img );\r\n    _this.cellSizeChange( cell && cell.element );\r\n    if ( !_this.options.freeScroll ) {\r\n      _this.positionSliderAtSelected();\r\n    }\r\n  }\r\n  imagesLoaded( this.slider ).on( 'progress', onImagesLoadedProgress );\r\n};\r\n\r\nreturn Flickity;\r\n\r\n}));\r\n\r\n","'use strict';\r\n\r\n// polyfill\r\nfunction polyfill() {\r\n  // aliases\r\n  var w = window;\r\n  var d = document;\r\n\r\n  // return if scroll behavior is supported and polyfill is not forced\r\n  if (\r\n    'scrollBehavior' in d.documentElement.style &&\r\n    w.__forceSmoothScrollPolyfill__ !== true\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  // globals\r\n  var Element = w.HTMLElement || w.Element;\r\n  var SCROLL_TIME = 468;\r\n\r\n  // object gathering original scroll methods\r\n  var original = {\r\n    scroll: w.scroll || w.scrollTo,\r\n    scrollBy: w.scrollBy,\r\n    elementScroll: Element.prototype.scroll || scrollElement,\r\n    scrollIntoView: Element.prototype.scrollIntoView\r\n  };\r\n\r\n  // define timing method\r\n  var now =\r\n    w.performance && w.performance.now\r\n      ? w.performance.now.bind(w.performance)\r\n      : Date.now;\r\n\r\n  /**\r\n   * indicates if a the current browser is made by Microsoft\r\n   * @method isMicrosoftBrowser\r\n   * @param {String} userAgent\r\n   * @returns {Boolean}\r\n   */\r\n  function isMicrosoftBrowser(userAgent) {\r\n    var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\r\n\r\n    return new RegExp(userAgentPatterns.join('|')).test(userAgent);\r\n  }\r\n\r\n  /*\r\n   * IE has rounding bug rounding down clientHeight and clientWidth and\r\n   * rounding up scrollHeight and scrollWidth causing false positives\r\n   * on hasScrollableSpace\r\n   */\r\n  var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\r\n\r\n  /**\r\n   * changes scroll position inside an element\r\n   * @method scrollElement\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   * @returns {undefined}\r\n   */\r\n  function scrollElement(x, y) {\r\n    this.scrollLeft = x;\r\n    this.scrollTop = y;\r\n  }\r\n\r\n  /**\r\n   * returns result of applying ease math function to a number\r\n   * @method ease\r\n   * @param {Number} k\r\n   * @returns {Number}\r\n   */\r\n  function ease(k) {\r\n    return 0.5 * (1 - Math.cos(Math.PI * k));\r\n  }\r\n\r\n  /**\r\n   * indicates if a smooth behavior should be applied\r\n   * @method shouldBailOut\r\n   * @param {Number|Object} firstArg\r\n   * @returns {Boolean}\r\n   */\r\n  function shouldBailOut(firstArg) {\r\n    if (\r\n      firstArg === null ||\r\n      typeof firstArg !== 'object' ||\r\n      firstArg.behavior === undefined ||\r\n      firstArg.behavior === 'auto' ||\r\n      firstArg.behavior === 'instant'\r\n    ) {\r\n      // first argument is not an object/null\r\n      // or behavior is auto, instant or undefined\r\n      return true;\r\n    }\r\n\r\n    if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\r\n      // first argument is an object and behavior is smooth\r\n      return false;\r\n    }\r\n\r\n    // throw error when behavior is not supported\r\n    throw new TypeError(\r\n      'behavior member of ScrollOptions ' +\r\n        firstArg.behavior +\r\n        ' is not a valid value for enumeration ScrollBehavior.'\r\n    );\r\n  }\r\n\r\n  /**\r\n   * indicates if an element has scrollable space in the provided axis\r\n   * @method hasScrollableSpace\r\n   * @param {Node} el\r\n   * @param {String} axis\r\n   * @returns {Boolean}\r\n   */\r\n  function hasScrollableSpace(el, axis) {\r\n    if (axis === 'Y') {\r\n      return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\r\n    }\r\n\r\n    if (axis === 'X') {\r\n      return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * indicates if an element has a scrollable overflow property in the axis\r\n   * @method canOverflow\r\n   * @param {Node} el\r\n   * @param {String} axis\r\n   * @returns {Boolean}\r\n   */\r\n  function canOverflow(el, axis) {\r\n    var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\r\n\r\n    return overflowValue === 'auto' || overflowValue === 'scroll';\r\n  }\r\n\r\n  /**\r\n   * indicates if an element can be scrolled in either axis\r\n   * @method isScrollable\r\n   * @param {Node} el\r\n   * @param {String} axis\r\n   * @returns {Boolean}\r\n   */\r\n  function isScrollable(el) {\r\n    var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\r\n    var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\r\n\r\n    return isScrollableY || isScrollableX;\r\n  }\r\n\r\n  /**\r\n   * finds scrollable parent of an element\r\n   * @method findScrollableParent\r\n   * @param {Node} el\r\n   * @returns {Node} el\r\n   */\r\n  function findScrollableParent(el) {\r\n    while (el !== d.body && isScrollable(el) === false) {\r\n      el = el.parentNode;\r\n    }\r\n\r\n    return el;\r\n  }\r\n\r\n  /**\r\n   * self invoked function that, given a context, steps through scrolling\r\n   * @method step\r\n   * @param {Object} context\r\n   * @returns {undefined}\r\n   */\r\n  function step(context) {\r\n    var time = now();\r\n    var value;\r\n    var currentX;\r\n    var currentY;\r\n    var elapsed = (time - context.startTime) / SCROLL_TIME;\r\n\r\n    // avoid elapsed times higher than one\r\n    elapsed = elapsed > 1 ? 1 : elapsed;\r\n\r\n    // apply easing to elapsed time\r\n    value = ease(elapsed);\r\n\r\n    currentX = context.startX + (context.x - context.startX) * value;\r\n    currentY = context.startY + (context.y - context.startY) * value;\r\n\r\n    context.method.call(context.scrollable, currentX, currentY);\r\n\r\n    // scroll more if we have not reached our destination\r\n    if (currentX !== context.x || currentY !== context.y) {\r\n      w.requestAnimationFrame(step.bind(w, context));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * scrolls window or element with a smooth behavior\r\n   * @method smoothScroll\r\n   * @param {Object|Node} el\r\n   * @param {Number} x\r\n   * @param {Number} y\r\n   * @returns {undefined}\r\n   */\r\n  function smoothScroll(el, x, y) {\r\n    var scrollable;\r\n    var startX;\r\n    var startY;\r\n    var method;\r\n    var startTime = now();\r\n\r\n    // define scroll context\r\n    if (el === d.body) {\r\n      scrollable = w;\r\n      startX = w.scrollX || w.pageXOffset;\r\n      startY = w.scrollY || w.pageYOffset;\r\n      method = original.scroll;\r\n    } else {\r\n      scrollable = el;\r\n      startX = el.scrollLeft;\r\n      startY = el.scrollTop;\r\n      method = scrollElement;\r\n    }\r\n\r\n    // scroll looping over a frame\r\n    step({\r\n      scrollable: scrollable,\r\n      method: method,\r\n      startTime: startTime,\r\n      startX: startX,\r\n      startY: startY,\r\n      x: x,\r\n      y: y\r\n    });\r\n  }\r\n\r\n  // ORIGINAL METHODS OVERRIDES\r\n  // w.scroll and w.scrollTo\r\n  w.scroll = w.scrollTo = function() {\r\n    // avoid action when no arguments are passed\r\n    if (arguments[0] === undefined) {\r\n      return;\r\n    }\r\n\r\n    // avoid smooth behavior if not required\r\n    if (shouldBailOut(arguments[0]) === true) {\r\n      original.scroll.call(\r\n        w,\r\n        arguments[0].left !== undefined\r\n          ? arguments[0].left\r\n          : typeof arguments[0] !== 'object'\r\n            ? arguments[0]\r\n            : w.scrollX || w.pageXOffset,\r\n        // use top prop, second argument if present or fallback to scrollY\r\n        arguments[0].top !== undefined\r\n          ? arguments[0].top\r\n          : arguments[1] !== undefined\r\n            ? arguments[1]\r\n            : w.scrollY || w.pageYOffset\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    // LET THE SMOOTHNESS BEGIN!\r\n    smoothScroll.call(\r\n      w,\r\n      d.body,\r\n      arguments[0].left !== undefined\r\n        ? ~~arguments[0].left\r\n        : w.scrollX || w.pageXOffset,\r\n      arguments[0].top !== undefined\r\n        ? ~~arguments[0].top\r\n        : w.scrollY || w.pageYOffset\r\n    );\r\n  };\r\n\r\n  // w.scrollBy\r\n  w.scrollBy = function() {\r\n    // avoid action when no arguments are passed\r\n    if (arguments[0] === undefined) {\r\n      return;\r\n    }\r\n\r\n    // avoid smooth behavior if not required\r\n    if (shouldBailOut(arguments[0])) {\r\n      original.scrollBy.call(\r\n        w,\r\n        arguments[0].left !== undefined\r\n          ? arguments[0].left\r\n          : typeof arguments[0] !== 'object' ? arguments[0] : 0,\r\n        arguments[0].top !== undefined\r\n          ? arguments[0].top\r\n          : arguments[1] !== undefined ? arguments[1] : 0\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    // LET THE SMOOTHNESS BEGIN!\r\n    smoothScroll.call(\r\n      w,\r\n      d.body,\r\n      ~~arguments[0].left + (w.scrollX || w.pageXOffset),\r\n      ~~arguments[0].top + (w.scrollY || w.pageYOffset)\r\n    );\r\n  };\r\n\r\n  // Element.prototype.scroll and Element.prototype.scrollTo\r\n  Element.prototype.scroll = Element.prototype.scrollTo = function() {\r\n    // avoid action when no arguments are passed\r\n    if (arguments[0] === undefined) {\r\n      return;\r\n    }\r\n\r\n    // avoid smooth behavior if not required\r\n    if (shouldBailOut(arguments[0]) === true) {\r\n      // if one number is passed, throw error to match Firefox implementation\r\n      if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\r\n        throw new SyntaxError('Value could not be converted');\r\n      }\r\n\r\n      original.elementScroll.call(\r\n        this,\r\n        // use left prop, first number argument or fallback to scrollLeft\r\n        arguments[0].left !== undefined\r\n          ? ~~arguments[0].left\r\n          : typeof arguments[0] !== 'object' ? ~~arguments[0] : this.scrollLeft,\r\n        // use top prop, second argument or fallback to scrollTop\r\n        arguments[0].top !== undefined\r\n          ? ~~arguments[0].top\r\n          : arguments[1] !== undefined ? ~~arguments[1] : this.scrollTop\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    var left = arguments[0].left;\r\n    var top = arguments[0].top;\r\n\r\n    // LET THE SMOOTHNESS BEGIN!\r\n    smoothScroll.call(\r\n      this,\r\n      this,\r\n      typeof left === 'undefined' ? this.scrollLeft : ~~left,\r\n      typeof top === 'undefined' ? this.scrollTop : ~~top\r\n    );\r\n  };\r\n\r\n  // Element.prototype.scrollBy\r\n  Element.prototype.scrollBy = function() {\r\n    // avoid action when no arguments are passed\r\n    if (arguments[0] === undefined) {\r\n      return;\r\n    }\r\n\r\n    // avoid smooth behavior if not required\r\n    if (shouldBailOut(arguments[0]) === true) {\r\n      original.elementScroll.call(\r\n        this,\r\n        arguments[0].left !== undefined\r\n          ? ~~arguments[0].left + this.scrollLeft\r\n          : ~~arguments[0] + this.scrollLeft,\r\n        arguments[0].top !== undefined\r\n          ? ~~arguments[0].top + this.scrollTop\r\n          : ~~arguments[1] + this.scrollTop\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    this.scroll({\r\n      left: ~~arguments[0].left + this.scrollLeft,\r\n      top: ~~arguments[0].top + this.scrollTop,\r\n      behavior: arguments[0].behavior\r\n    });\r\n  };\r\n\r\n  // Element.prototype.scrollIntoView\r\n  Element.prototype.scrollIntoView = function() {\r\n    // avoid smooth behavior if not required\r\n    if (shouldBailOut(arguments[0]) === true) {\r\n      original.scrollIntoView.call(\r\n        this,\r\n        arguments[0] === undefined ? true : arguments[0]\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    // LET THE SMOOTHNESS BEGIN!\r\n    var scrollableParent = findScrollableParent(this);\r\n    var parentRects = scrollableParent.getBoundingClientRect();\r\n    var clientRects = this.getBoundingClientRect();\r\n\r\n    if (scrollableParent !== d.body) {\r\n      // reveal element inside parent\r\n      smoothScroll.call(\r\n        this,\r\n        scrollableParent,\r\n        scrollableParent.scrollLeft + clientRects.left - parentRects.left,\r\n        scrollableParent.scrollTop + clientRects.top - parentRects.top\r\n      );\r\n\r\n      // reveal parent in viewport unless is fixed\r\n      if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\r\n        w.scrollBy({\r\n          left: parentRects.left,\r\n          top: parentRects.top,\r\n          behavior: 'smooth'\r\n        });\r\n      }\r\n    } else {\r\n      // reveal element in viewport\r\n      w.scrollBy({\r\n        left: clientRects.left,\r\n        top: clientRects.top,\r\n        behavior: 'smooth'\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nif (typeof exports === 'object' && typeof module !== 'undefined') {\r\n  // commonjs\r\n  module.exports = { polyfill: polyfill };\r\n} else {\r\n  // global\r\n  polyfill();\r\n}\r\n"]}